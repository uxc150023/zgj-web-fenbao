import{J as e}from"./JyTable-ee0f04c7.js";import{c as a}from"./JyTabs-5dab7295.js";import{c as l}from"./documentsDetails-f9984ce1.js";import{g as t,j as s}from"./chunk-vform-6b80d696.js";import{a as o}from"./sealApplyIntellect-250874b8.js";import{aA as n,ay as i,ag as p,al as r,aF as d,as as u,o as m,x as c,bj as y,p as h,a$ as b,F as g,n as f,m as v,w,aT as D,ab as S,aw as k,at as _}from"./chunk-vue-0eb5cee7.js";import"./sangedian-856844bf.js";import"./Layout-d1d9ddbf.js";import"./searchForm-7d992d01.js";import"./ketanchude-51586196.js";import"./KDocumentTypeDialog-a877b983.js";import"./chunk-element-plus-b8773542.js";import"./chunk-ant-design-vue-bd7f8294.js";import"./chunk-@ant-design-icons-svg-8f5189a2.js";import"./pagination-c0fecb51.js";import"./batch-f5c51482.js";import"./index-64730435.js";/* empty css                                                               */import"./cha-kong-4b498f35.js";import"./table-7b07b9a5.js";/* empty css                                                                         */import"./portion-c53e9f8b.js";/* empty css                                                                */import"./yuan-hui-61924fee.js";import"./chunk-@ant-design-icons-vue-ff9a333c.js";const x=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"盖章码/单据名称"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!0,joinStr:","},options:[]},{id:"sealId",requestParams:"sealId",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+印章名称"},options:[],values:null},{id:"applyUser",requestParams:"applyUserId",label:"申请人",type:"derivable",defaultAttribute:{type:"user",multiple:!1,placeholder:"+申请人"},options:[],values:null},{id:"applyOrgan",requestParams:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",multiple:!1,placeholder:"+申请部门"},options:[],values:null},{id:"useModel",label:"用印模式",type:"checkButton",data:[{id:"1",name:"智能用印"},{id:"2",name:"远程盖章"},{id:"3",name:"实时视频盖章"}]}],j=[{prop:"useSealApplyNo",label:"单据编号","min-width":180,fixed:"left",align:"center",show:!0},{prop:"useSealFileName",label:"单据名称",width:180,show:!0},{prop:"sealName",label:"印章名称","min-width":150,show:!0},{prop:"sealCode",label:"盖章码",width:80,show:!0},{prop:"applyUseCount",label:"申请盖章次数",align:"center",width:150,show:!0},{prop:"realUseCount",label:"实际盖章次数","min-width":150,show:!0},{prop:"useSealStateName",label:"用印状态","min-width":150,show:!0},{prop:"applyUserName",label:"申请人","min-width":150,show:!0},{prop:"applyOrganName",label:"申请部门","min-width":150,show:!0},{prop:"applyDatetime",label:"申请时间",width:180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":180,show:!0,align:"center",customDisplayType:"custom"}],M={class:"PrintControlManagement-recordWithSeal"},A=(e=>(k("data-v-8fa0d11f"),e=e(),_(),e))((()=>h("div",{class:"title"},[h("div",null,"智能用印"),h("div",{class:"title-more"},[h("div",{class:"title-more-add"})])],-1))),C={class:"rankDisplayData"},N=w(" 申请转办 "),T=w(" 申请重置 "),I=w(" 结束用印 "),J=w(" 申请重置 "),B=w(" 申请重置 "),E={class:"ap-box"},U=t({setup(t){const k=s(),_=n("pageNoUse"),U=n(null),F=i({componentsTabs:{data:[{label:"待智能用印",name:"pageNoUse"},{label:"智能用印中",name:"pageUsing"},{label:"已完成用印",name:"pageUseDone"}]},componentsSearchForm:{data:x,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:j},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},JyElMessageBox:{type:"",column:{},flag:"",show:!1,header:{data:""},content:{data:""}},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}});function P(e,a,l,t){"useSealFileName"===a.property&&(F.componentsDocumentsDetails.show=!0,o.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,l=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:a.useSealStateName,iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?l.splice(l.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{l.splice(l.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),F.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:l}})),o.intellect({useSealApplyId:e.useSealApplyId}).then((e=>{var a;(null==(a=e.data)?void 0:a.length)?F.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!0,data:e.data}:F.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!1,data:[]}})),o.attachment({useSealApplyId:e.useSealApplyId}).then((e=>{var a,l;(null==(a=e.data.fileInfos)?void 0:a.length)||(null==(l=e.data.fileInfoAdds)?void 0:l.length)?F.componentsDocumentsDetails.visible[0].accessory={show:!0,printedData:e.data.fileInfos,additionalData:e.data.fileInfoAdds}:F.componentsDocumentsDetails.visible[0].accessory={show:!1,printedData:[],additionalData:[]}})))}function q(e,a){"申请转办"===a&&O("/frontDesk/printControlManage/useSealManage/intelligentPrinting/transferApplication","transfer"),"申请重置"===a&&O("/frontDesk/printControlManage/useSealManage/intelligentPrinting/transferApplication","transfer"),"撤销转办"===a&&(F.JyElMessageBox.header.data="提示？",F.JyElMessageBox.content.data="请问确定要撤销转办申请吗？",F.JyElMessageBox.show=!0),"撤销重置"===a&&(F.JyElMessageBox.header.data="提示？",F.JyElMessageBox.content.data="请问确定要撤销重置用印申请吗？",F.JyElMessageBox.show=!0),"结束用印"===a&&(F.JyElMessageBox.header.data="提示？",F.JyElMessageBox.content.data="请问确定要结束用印吗？",F.JyElMessageBox.show=!0),"查看历史记录"===a&&(F.JyElMessageBox.header.data="提示？",F.JyElMessageBox.content.data="请问确定要催办吗？",F.JyElMessageBox.show=!0)}const O=(e,a)=>{const l={path:e};a&&(l.query={transfer:a}),k.push(l)};function V(){F.componentsDocumentsDetails.show=!1}function Y(e){_.value=e,S((()=>{U.value.reloadData()}))}return p((()=>{})),r((()=>{})),(t,s)=>{const o=d("el-button"),n=d("JyElMessageBox");return u(),m("div",M,[c(e,{url:`/sealApply/intellect/${_.value}`,ref_key:"jyTable",ref:U,hasTabs:"",componentsSearchForm:b(F).componentsSearchForm,componentsTableHeader:b(F).componentsTable.header,tableClick:"useSealFileName",onCellClick:P},{title:y((()=>[A])),tabs:y((()=>[h("div",null,[c(a,{activeName:_.value,data:b(F).componentsTabs.data,onTabChange:Y},null,8,["activeName","data"])])])),custom_caozuo:y((e=>[h("div",C,["pageNoUse"===_.value?(u(),m(g,{key:0},[c(o,{type:"info",plain:"",onClick:e=>q(0,"申请转办"),link:"",text:""},{default:y((()=>[N])),_:2},1032,["onClick"]),c(o,{type:"info",plain:"",onClick:e=>q(0,"申请重置"),link:"",text:""},{default:y((()=>[T])),_:2},1032,["onClick"])],64)):f("",!0),"pageUsing"===_.value?(u(),m(g,{key:1},[c(o,{type:"info",plain:"",onClick:e=>q(0,"结束用印"),link:"",text:""},{default:y((()=>[I])),_:2},1032,["onClick"]),c(o,{type:"info",plain:"",onClick:e=>q(0,"申请重置"),link:"",text:""},{default:y((()=>[J])),_:2},1032,["onClick"])],64)):f("",!0),"pageUseDone"===_.value?(u(),v(o,{key:2,type:"info",plain:"",onClick:e=>q(0,"申请重置"),link:"",text:""},{default:y((()=>[B])),_:2},1032,["onClick"])):f("",!0)])])),_:1},8,["url","componentsSearchForm","componentsTableHeader"]),h("div",E,[c(l,{show:b(F).componentsDocumentsDetails.show,visible:b(F).componentsDocumentsDetails.visible,onClickClose:V},null,8,["show","visible"])]),c(n,{modelValue:b(F).JyElMessageBox.show,"onUpdate:modelValue":s[0]||(s[0]=e=>b(F).JyElMessageBox.show=e),show:b(F).JyElMessageBox.show,defaultAttribute:{}},{header:y((()=>[w(D(b(F).JyElMessageBox.header.data),1)])),content:y((()=>[w(D(b(F).JyElMessageBox.content.data),1)])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-8fa0d11f"]]);export{U as default};
