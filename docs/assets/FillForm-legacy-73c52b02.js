System.register(["./chunk-vform-legacy-aa92d37d.js","./index-legacy-ec69e03d.js","./index-legacy-b6c4afe9.js","./chunk-vue-legacy-ac482c0f.js","./back-legacy-abbf9c2a.js","./step_next-legacy-cd009860.js","./Layout-legacy-447107b9.js","./JyStep-legacy-a88564fb.js","./index-legacy-e757f9dd.js","./chunk-element-plus-legacy-93ba4a6a.js","./chunk-ant-design-vue-legacy-1182637d.js","./chunk-@ant-design-icons-svg-legacy-99a059a7.js","./chunk-@ant-design-icons-vue-legacy-38d6bf6a.js","./index-legacy-d296e4cb.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-304a2984.js"],(function(e,t){"use strict";var a,l,i,n,o,s,c,r,d,u,f,m,p,g,v,y,h,P,b,x,I,w,j,S,z,k,D,V,_,N,M,T,J,O,C,q,F,L,A=document.createElement("style");return A.textContent=".Seal-application-fill-form[data-v-5dd70f9f]{margin:0%;position:relative}.Seal-application-fill-form .contanier-flow[data-v-5dd70f9f]{width:100%;padding:0;margin-top:0}.Seal-application-fill-form .title[data-v-5dd70f9f]{display:flex;align-items:center;justify-content:space-between}.Seal-application-fill-form .title .title-desc[data-v-5dd70f9f]{display:flex;align-items:center}.Seal-application-fill-form .title .title-desc .title-desc-img[data-v-5dd70f9f]{margin-right:.5rem;cursor:pointer}.Seal-application-fill-form .PrintingProcess[data-v-5dd70f9f]{min-width:1440px}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content[data-v-5dd70f9f]{display:flex;flex-flow:wrap}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list[data-v-5dd70f9f]{margin-bottom:1rem;display:flex;align-items:center}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list .PrintingProcess-content-list-cont[data-v-5dd70f9f]{height:17rem;align-self:flex-start;width:15rem;border:1px solid var(--jy-color-border-1);background-color:var(--jy-color-fill--1);padding:1rem;box-sizing:border-box}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list .PrintingProcess-content-list-cont .PrintingProcess-content-list-cont-title[data-v-5dd70f9f]{display:flex;justify-content:center;height:2rem;align-items:center;font-size:var(--jy-font-size-title-1)}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list .PrintingProcess-content-list-cont .PrintingProcess-content-list-cont-title .PrintingProcess-content-list-cont-title-img[data-v-5dd70f9f]{margin-right:.5rem}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list .PrintingProcess-content-list-cont .PrintingProcess-content-list-cont-list[data-v-5dd70f9f]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;box-sizing:border-box}.Seal-application-fill-form .PrintingProcess .PrintingProcess-content .PrintingProcess-content-list .PrintingProcess-content-list-iocn[data-v-5dd70f9f]{margin-left:1rem;margin-right:1rem;width:3rem;display:flex;align-items:center;justify-content:center}.Seal-application-fill-form .custom[data-v-5dd70f9f]{box-sizing:border-box;text-align:center;padding:10px 16px 0;max-height:calc(100vh - 210px)}.Seal-application-fill-form .custom-buzhou[data-v-5dd70f9f]{display:flex;justify-content:center;align-items:center;padding:0;box-sizing:border-box}.Seal-application-fill-form .custom-buzhou .custom-buzhou-list[data-v-5dd70f9f]{display:flex;justify-content:center;align-items:center}.Seal-application-fill-form .custom-buzhou .custom-buzhou-list .custom-buzhou-list-desc[data-v-5dd70f9f]{display:flex;justify-content:center;align-items:center;width:10rem}.Seal-application-fill-form .custom-buzhou .custom-buzhou-list .custom-buzhou-list-desc .custom-buzhou-list-desc-index[data-v-5dd70f9f]{width:1.5rem;height:1.5rem;display:flex;justify-content:center;align-items:center;background-color:var(--jy-color-fill--3);color:var(--jy-color-text-3);border-radius:var(--jy-border-radius-2);margin-right:.5rem}.Seal-application-fill-form .custom-buzhou .custom-buzhou-list .custom-buzhou-list-desc .custom-buzhou-list-desc-text[data-v-5dd70f9f]{font-size:var(--jy-font-size-title-1);color:var(--jy-color-text-3)}.Seal-application-fill-form .custom-buzhou .custom-buzhou-list .custom-buzhou-list-jiantou[data-v-5dd70f9f]{width:7rem;display:flex;justify-content:center;align-items:center}.Seal-application-fill-form .custom-buzhou .indexActive[data-v-5dd70f9f]{background-color:var(--jy-primary-6)!important;color:var(--jy-in-common-use-1)!important}.Seal-application-fill-form .custom-buzhou .textActive[data-v-5dd70f9f]{color:var(--jy-color-text-1)!important}.Seal-application-fill-form .custom-buzhou .font-color-45[data-v-5dd70f9f]{color:var(--jy-color-text-3)!important}.Seal-application-fill-form .ap-fixed[data-v-5dd70f9f]{width:100%;position:absolute;bottom:0%;height:4rem;display:flex;justify-content:center;align-items:center;border-top:1px solid var(--jy-color-border-2);background-color:var(--jy-in-common-use-1);z-index:9}.Seal-application-fill-form .ap-fixed .ap-fixed-save-icon .iconpark-icon[data-v-5dd70f9f]{width:1rem;height:1rem}.topTitles[data-v-5dd70f9f]{width:100%;display:flex;justify-content:space-between;align-items:center}.upload-demo[data-v-5dd70f9f]{text-align:left}.custom .ap-cont-box-title-label[data-v-5dd70f9f]{width:100%!important}\n",document.head.appendChild(A),{setters:[e=>{a=e.g,l=e.j,i=e.u,n=e.Q,o=e.a6,s=e.a8,c=e.a9},e=>{r=e.default},e=>{d=e.default},e=>{u=e.aA,f=e.ay,m=e.ag,p=e.al,g=e.aF,v=e.as,y=e.o,h=e.x,P=e.bj,b=e.p,x=e.a$,I=e.bl,w=e.bb,j=e.m,S=e.n,z=e.F,k=e.aD,D=e.aa,V=e.aT,_=e.w,N=e.ab,M=e.aw,T=e.at},e=>{J=e._},e=>{O=e._},e=>{C=e.c},e=>{q=e.S},e=>{F=e._},e=>{L=e.E},null,null,null,null,null,null,null],execute:function(){const t=e=>(M("data-v-5dd70f9f"),e=e(),T(),e),A={class:"Seal-application-fill-form"},U={class:"breadcrumb"},Q=_(" 用印申请 "),E=_(" 新建用印申请 "),B=_(" 新建用印申请 "),H=t((()=>b("div",null,null,-1))),R={class:"custom-buzhou"},Y={class:"custom"},$={key:1},G={class:"PrintingProcess"},K={class:"PrintingProcess-content"},W={class:"PrintingProcess-content-list-cont"},X={class:"PrintingProcess-content-list-cont-title"},Z=t((()=>b("img",{class:"PrintingProcess-content-list-cont-title-img",src:"/zgj-web/assets/calendar-67a958ae.svg",alt:""},null,-1))),ee={class:"PrintingProcess-content-list-cont-title-span"},te={class:"PrintingProcess-content-list-cont-list-name"},ae=t((()=>b("div",{class:"PrintingProcess-content-list-cont-list-icon"},[b("img",{class:"PrintingProcess-content-list-cont-list-icon-img",src:"/zgj-web/assets/tips-e93e6fe1.svg",alt:""})],-1))),le={class:"PrintingProcess-content-list-iocn"},ie={key:0,class:"PrintingProcess-content-list-iocn-img",src:O,alt:""},ne={key:0,class:"fixed"},oe={class:"ap-fixed"},se=_("下一步"),ce=t((()=>b("span",{class:"ap-fixed-save-text"}," 保存模板 ",-1))),re=t((()=>b("div",{style:{width:"300px"}}," 模板可用于提高重复发起同种类型用印申请的填写效率，一种文件类型仅允许保存一个模板，保存后可在申请页面直接引用 ",-1))),de=t((()=>b("i",{class:"ap-fixed-save-icon"},[b("svg",{class:"iconpark-icon"},[b("use",{href:"#icon4"})])],-1))),ue={key:1,class:"fixed"},fe={class:"ap-fixed"},me=_("提交 "),pe=_("上一步"),ge=_(" 若当前文件类型已有模版则会覆盖，若当前文件类型没有模板则会创建，请问确定要保存吗？ ");e("default",a({setup(e){const t=l(),a=i(),_=u(null),M=u(null),T=u(null),O=u(null),ve=u(a.query.formVersionId),ye=u(null),he=u(!1),Pe=f({cache:{flowList:[{name:"填写表单信息",active:!0},{name:"确认审批流程",active:!1},{name:"完成",active:!1}],formData:{},optionData:{},SealformData:{},SealoptionData:{},PrintingProcess:{list:[{title:"盖前",list:[{name:"说明详情后续补上"}]},{title:"实时视频盖章",list:[{name:"说明详情后续补上"},{name:"说明详情后续补上"},{name:"说明详情后续补上"}]},{title:"盖中",list:[{name:"说明详情后续补上"},{name:"说明详情后续补上"},{name:"说明详情后续补上"},{name:"说明详情后续补上"},{name:"说明详情后续补上"}]},{title:"盖后",list:[{name:"说明详情后续补上"}]},{title:"归档",list:[{name:"说明详情后续补上"}]}]}}}),be=u(null),xe=u("one"),Ie=u(null),we=u([]),je=u(null),Se=u(!1),ze=u(null),ke=u({}),De=u(null),Ve=u({padding:"24px 0 24px 24px"}),_e=()=>{n.templateAdd({formVersionId:ve.value,templateName:ze.value.applyName,fileTypeId:ze.value.fileTypeId,templateValue:JSON.stringify(ze.value)}).then((e=>{L.success("保存模板成功"),Se.value=!1})).catch((()=>{Se.value=!1}))},Ne=()=>{Se.value=!1};function Me(){t.go(-1)}function Te(){be.value.getFormData().then((e=>{Pe.cache.formData=e;const t=Pe.cache.flowList;t[0].active=!1,t[1].active=!0,Pe.cache.flowList=JSON.parse(JSON.stringify(t)),xe.value="two",n.flowList({formMessageId:a.query.formMessageId,fileTypeId:e.fileTypeId}).then((e=>{e.data&&e.data.length&&(we.value=e.data,je.value=e.data[0].flowMessageId,ye.value=e.data[0].flowVersionId,Ce(e.data[0].modelId,e.data[0].definitionId))}))}))}const Je=async()=>{ze.value=null;const e=await be.value.getFormData(!1);e.fileTypeId||e.applyName?(ze.value=e,Se.value=!0):L.warning("单据名称和文件类型必填，否则不允许保存模板")};function Oe(){const e=we.value.find((e=>e.flowMessageId===je.value));ye.value=e.flowVersionId,Ce(e.modelId,e.definitionId)}function Ce(e,t){_.value={modelId:e,definitionId:t},n.flowDetail({..._.value,edit:!0}).then((async e=>{De.value=null,N((()=>{De.value=e.data.data,N((()=>{ke.value={height:document.getElementById("flow-designer-box").clientHeight+"px",overflow:"hidden"}}))}))}))}function qe(){const e=Pe.cache.flowList;e[0].active=!0,e[1].active=!1,Pe.cache.flowList=JSON.parse(JSON.stringify(e)),xe.value="one"}function Fe(){if(!je.value)return void L.warning("请选择审批流程");const e=c;let l={},i={};for(const t in Pe.cache.formData)e.indexOf(t)>-1?l={...l,[t]:Pe.cache.formData[t]}:i={...i,[t]:Pe.cache.formData[t]};const o={modelId:_.value.modelId,definitionId:_.value.definitionId,instanceName:Pe.cache.formData.applyName,suggest:null,formData:{...Pe.cache.formData,formVersionId:ve.value,flowVersionId:ye.value,formMessageId:a.query.formMessageId,flowMessageId:je.value},variable:{subType:M.value,instanceType:T.value}};he.value=!0,n.submit(o).then((e=>{n.add({formMessageId:a.query.formMessageId,formVersionId:ve.value,flowVersionId:ye.value,applyTypeId:M.value,sealUseTypeId:O.value,flowMessageId:je.value,gunsSysId:e.data.data.instanceId,customApplyField:"{}"===JSON.stringify(i)?null:i,...l}).then((()=>{t.replace({path:"/frontDesk/printControlManage/useSealManage/sealApplication/accomplish",query:{applyNo:Pe.cache.formData.applyNo}})})).finally((()=>{he.value=!1}))})).finally((()=>{he.value=!1}))}return m((()=>{a.query.useId?n.formQuery({formMessageId:a.query.formMessageId}).then((e=>{M.value=e.data.applyTypeId,T.value=e.data.applyTypePid,O.value=e.data.sealUseTypeId,Ie.value=JSON.parse(e.data.formInfo),n.templateView(a.query.useId).then((e=>{ve.value=e.data.formVersionId,be.value.setFormData(JSON.parse(e.data.templateValue)),N((()=>{be.value.setFieldValue("applyNo",o())}))}))})):n.formQuery({formMessageId:a.query.formMessageId}).then((e=>{M.value=e.data.applyTypeId,T.value=e.data.applyTypePid,O.value=e.data.sealUseTypeId,Ie.value=JSON.parse(e.data.formInfo),N((()=>{be.value.setFieldValue("applyNo",o())}))}))})),p((()=>{})),(e,t)=>{const a=g("el-breadcrumb-item"),l=g("el-breadcrumb"),i=d,n=g("el-option"),o=g("el-select"),c=r,u=g("el-scrollbar"),f=g("el-button"),m=g("el-tooltip"),p=s;return v(),y("div",A,[h(C,{Layout:"breadcrumb,title,custom,fixed",cardStyle:Ve.value},{breadcrumb:P((()=>[b("div",U,[h(l,{separator:"/"},{default:P((()=>[h(a,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:P((()=>[Q])),_:1}),h(a,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:P((()=>[E])),_:1})])),_:1})])])),title:P((()=>[b("div",{class:"title"},[b("div",{class:"title-desc"},[b("img",{class:"title-desc-img",src:J,alt:"",onClick:Me}),B]),H])])),custom:P((()=>[b("div",R,[h(q,{data:x(Pe).cache.flowList},null,8,["data"])]),h(u,{height:"calc(100vh - 300px)",style:{"padding-right":"24px"}},{default:P((()=>[b("div",Y,[Ie.value?I((v(),j(i,{key:0,mode:"render",formJson:Ie.value,formData:x(Pe).cache.formData,optionData:x(Pe).cache.optionData,ref_key:"refFillFormInformation",ref:be},null,8,["formJson","formData","optionData"])),[[w,"one"===xe.value]]):S("",!0),"two"===xe.value?(v(),y("div",$,[h(c,{label:"审批流程"},{right:P((()=>[h(o,{modelValue:je.value,"onUpdate:modelValue":t[0]||(t[0]=e=>je.value=e),placeholder:"请选择流程",onChange:Oe},{default:P((()=>[(v(!0),y(z,null,k(we.value,(e=>(v(),j(n,{key:e.flowMessageId,label:e.flowName,value:e.flowMessageId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),De.value?(v(),j(F,D({key:0,id:"flow"},{readable:!0,mapable:!1,scroll:!1,scrollY:!1,top:"50"},{node:De.value,wrapStyle:ke.value}),null,16,["node","wrapStyle"])):S("",!0),b("div",G,[h(c,{label:"用印流程"}),b("div",K,[(v(!0),y(z,null,k(x(Pe).cache.PrintingProcess.list,((e,t)=>(v(),y("div",{class:"PrintingProcess-content-list",key:t},[b("div",W,[b("div",X,[Z,b("span",ee,V(e.title),1)]),(v(!0),y(z,null,k(e.list,((e,t)=>(v(),y("div",{class:"PrintingProcess-content-list-cont-list",key:t},[b("div",te,V(e.name),1),ae])))),128))]),b("div",le,[t<x(Pe).cache.PrintingProcess.list.length-1?(v(),y("img",ie)):S("",!0)])])))),128))])])])):S("",!0)])])),_:1})])),fixed:P((()=>["one"===xe.value?(v(),y("div",ne,[b("div",oe,[h(f,{type:"primary",onClick:Te},{default:P((()=>[se])),_:1}),h(f,{class:"ap-fixed-save",onClick:Je},{default:P((()=>[ce,h(m,{class:"box-item",effect:"dark",content:"",placement:"top"},{content:P((()=>[re])),default:P((()=>[de])),_:1})])),_:1})])])):S("",!0),"two"===xe.value?(v(),y("div",ue,[b("div",fe,[h(f,{type:"primary",loading:he.value,onClick:Fe},{default:P((()=>[me])),_:1},8,["loading"]),h(f,{onClick:qe},{default:P((()=>[pe])),_:1})])])):S("",!0)])),_:1},8,["cardStyle"]),h(p,{modelValue:Se.value,"onUpdate:modelValue":t[1]||(t[1]=e=>Se.value=e),mode:1,onOnConfirm:_e,onOnCancel:Ne,title:"保存模版"},{default:P((()=>[ge])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-5dd70f9f"]]))}}}));
