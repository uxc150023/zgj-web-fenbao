import{g as s,j as l,U as a,F as e,Q as t,k as i,n as c,a8 as o,a0 as n}from"./chunk-vform-c3afb8ec.js";import u from"./index-af5739e4.js";import{aA as d,al as v,aF as m,as as r,o as p,x as f,bj as g,p as h,a$ as k,bm as b,F as y,aD as I,m as C,aT as V,n as j,bl as x,bb as _,w,aw as T,at as U}from"./chunk-vue-0eb5cee7.js";import{_ as F,a as N,b as A,c as M}from"./form_icon-77599bad.js";import{_ as S}from"./step_next-df27ddba.js";import{c as D}from"./Layout-442da1ba.js";import{E as L}from"./chunk-element-plus-b8773542.js";import"./chunk-ant-design-vue-bd7f8294.js";import"./chunk-@ant-design-icons-svg-8f5189a2.js";import"./chunk-@ant-design-icons-vue-ff9a333c.js";const O=s=>(T("data-v-54dd16fb"),s=s(),U(),s),q={class:"Seal-application-Selection-form"},K=O((()=>h("div",{class:"title"},[h("div",null,"用印申请"),h("div")],-1))),Q={class:"custom"},B=O((()=>h("div",{class:"cont-title"}," 请选择所需表单 ",-1))),E=O((()=>h("div",{class:"cont-desc"}," 请根据以下步骤完善表单内容及确认审批流程 ",-1))),$=O((()=>h("div",{class:"cont-liuc"},[h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:N,alt:""})]),h("div",{class:"step-text"}," 填写表单信息 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:S,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:A,alt:""})]),h("div",{class:"step-text"}," 确认审批流程 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:S,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:M,alt:""})]),h("div",{class:"step-text"}," 完成用印申请 ")])],-1))),z={class:"cont-liebiao"},G={class:"column-list-back"},H=O((()=>h("img",{class:"image-slot",src:F},null,-1))),J={key:1,class:"column-list-back-img",src:F,alt:""},P={class:"column-list-desc"},R={class:"column-list-but"},W=w(" 去申请 "),X=["onClick"],Y=[O((()=>h("span",{class:"text"},"保存的模板",-1))),O((()=>h("i",{class:"icon"},[h("svg",{class:"iconpark-icon"},[h("use",{href:"#icon3"})])],-1)))],Z={class:"empty"},ss={class:"optional"},ls={class:"list-title"},as={class:"list-title-desc"},es={class:"list-title-time"},ts={class:"optional-list-desc"},is={class:"optional-list-desc-text"},cs={class:"optional-list-desc-but"},os=["onClick"],ns=["onClick"],us=O((()=>h("span",{class:"tip"}," 表单已更新，历史表单对应的模板会自动失效 ",-1))),ds={class:"list-title"},vs={class:"list-title-desc"},ms={class:"list-title-time"},rs={class:"optional-list-desc"},ps={class:"optional-list-desc-text"},fs={key:0,class:"data-null"},gs=[O((()=>h("img",{src:n},null,-1)))],hs=O((()=>h("span",null,null,-1))),ks=w(" 请问确定要删除吗？ "),bs=s({setup(s){const n=l(),w=d(!1),T=d([]),U=d(""),F=d(!1),N=d(!1),A=d(""),M=()=>{t.deleteTem(A.value).then((s=>{N.value=!1,L.success("删除成功"),Cs()})).catch((()=>{N.value=!1}))},S=()=>{N.value=!1};const O=d([]),bs=d([]),ys=d(""),Is=d("");const Cs=()=>{t.templateList({formVersionId:Is.value}).then((s=>{s.data?(O.value=s.data.templates?s.data.templates:[],bs.value=s.data.validTemplates?s.data.validTemplates:[],w.value=!0):(O.value=[],bs.value=[],w.value=!0)}))};function Vs(){w.value=!1}const js=i((()=>{xs()}),500),xs=()=>{F.value=!0,T.value=[],t.list({keyword:U.value.trim()}).then((s=>{T.value=s.data||[]})).finally((()=>{F.value=!1}))},_s=()=>{t.clearValid({formVersionId:Is.value}).then((s=>{L.success("清除成功"),bs.value=[]}))};return v((()=>{xs()})),(s,l)=>{const t=m("el-input"),i=m("el-image"),d=m("el-button"),v=m("el-empty"),L=u,ws=c,Ts=o;return r(),p("div",q,[f(D,{Layout:"title,custom"},{title:g((()=>[K])),custom:g((()=>[h("div",Q,[f(t,{modelValue:U.value,"onUpdate:modelValue":l[0]||(l[0]=s=>U.value=s),placeholder:"请输入表单名称",clearable:"",class:"formInput",onInput:k(js),onKeyup:b(xs,["enter"]),"prefix-icon":k(a)},null,8,["modelValue","onInput","onKeyup","prefix-icon"]),B,E,$,h("div",z,[(r(!0),p(y,null,I(T.value,((s,l)=>(r(),p("div",{class:"column-list",key:l},[h("div",G,[s.imageUrl?(r(),C(i,{key:0,class:"column-list-back-img active",src:k(e)+s.imageUrl,fit:"scale-down","preview-src-list":[k(e)+s.imageUrl]},{error:g((()=>[H])),_:2},1032,["src","preview-src-list"])):(r(),p("img",J))]),h("div",P,V(s.formName),1),h("div",R,[f(d,{type:"primary",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,void n.push({name:"fillForm",query:{formMessageId:a,formVersionId:e}});var a,e}},{default:g((()=>[W])),_:2},1032,["onClick"])]),h("div",{class:"column-list-template",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,O.value=[],bs.value=[],ys.value=a,Is.value=e,void Cs();var a,e}},Y,8,X)])))),128)),h("div",Z,[T.value.length||F.value?j("",!0):(r(),C(v,{key:0,description:"您暂无可用的申请表单"}))])])])])),_:1}),f(ws,{"onUpdate:show":l[1]||(l[1]=s=>w.value=s),show:w.value,title:"选择模板",centerBtn:!0,width:1e3,height:600,onClose:Vs},{footer:g((()=>[hs])),default:g((()=>[h("div",ss,[(r(!0),p(y,null,I(O.value,((s,l)=>(r(),p("div",{class:"optional-list",key:l},[h("div",ls,[h("div",as,V(s.fileTypeName),1),h("div",es,V(s.createDatetime),1)]),h("div",ts,[h("div",is,V(s.templateName),1),h("div",cs,[h("div",{class:"button shiyong",onClick:l=>{return a=s.useSealApplyTemplateId,void n.push({name:"fillForm",query:{formVersionId:null,useId:a,formMessageId:ys.value}});var a}}," 使用 ",8,os),h("div",{class:"button shanchu",onClick:l=>{return a=s.useSealApplyTemplateId,N.value=!0,void(A.value=a);var a}}," 删除 ",8,ns)])])])))),128)),x(f(L,{label:"失效模版",btn1:"一键清除",onOnClickCancel:_s},{tip:g((()=>[us])),_:1},512),[[_,0!==bs.value.length]]),(r(!0),p(y,null,I(bs.value,((s,l)=>x((r(),p("div",{class:"optional-list1",key:l},[h("div",ds,[h("div",vs,V(s.fileTypeName),1),h("div",ms,V(s.createDatetime),1)]),h("div",rs,[h("div",ps,V(s.templateName),1)])])),[[_,0!==bs.value.length]]))),128))]),O.value.length+bs.value.length===0?(r(),p("div",fs,gs)):j("",!0)])),_:1},8,["show"]),f(Ts,{modelValue:N.value,"onUpdate:modelValue":l[2]||(l[2]=s=>N.value=s),mode:1,onOnConfirm:M,onOnCancel:S,title:"删除模版"},{default:g((()=>[ks])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-54dd16fb"]]);export{bs as default};
