System.register(["./chunk-vform-legacy-aa92d37d.js","./chunk-vue-legacy-ac482c0f.js","./gengduo-caozuo-legacy-e441bcd3.js","./ketanchude-legacy-4abaf206.js","./JyTable-legacy-3d9a0dd2.js","./department-legacy-80e75d3d.js","./actionMoreDialog-legacy-a4d504ad.js","./index-legacy-d3e3ceea.js","./chunk-element-plus-legacy-93ba4a6a.js","./chunk-ant-design-vue-legacy-1182637d.js","./chunk-@ant-design-icons-svg-legacy-99a059a7.js","./chunk-@ant-design-icons-vue-legacy-38d6bf6a.js","./sangedian-legacy-75d81ddc.js","./Layout-legacy-447107b9.js","./searchForm-legacy-a72e2530.js","./KDocumentTypeDialog-legacy-05abd806.js","./pagination-legacy-68800ac1.js","./batch-legacy-dc638563.js","./index-legacy-d296e4cb.js","./index-legacy-a750e14f.js","./cha-kong-legacy-1ebc7b7b.js","./index-legacy-ec69e03d.js","./yuan-hui-legacy-0c1e3d03.js","./index-legacy-e757f9dd.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-304a2984.js"],(function(e,a){"use strict";var t,n,l,o,d,r,i,c,u,s,g,m,p,h,v,b,y,f,x,w,N,j,I,_,k,D,z,P,A,C,T,L=document.createElement("style");return L.textContent='.title[data-v-36305306]{display:flex;align-items:center;justify-content:space-between}.title .title-more[data-v-36305306]{display:flex}.title .title-more .title-more-down[data-v-36305306]{margin-left:5px}.title .title-more .title-more-down img[data-v-36305306]{margin-right:5px}.components-Layout .ap-box-tree[data-v-36305306]{position:relative}.box-card[data-v-36305306]{width:110px;position:absolute;z-index:1000}.box-card div[data-v-36305306]{height:35px;line-height:35px;border-bottom:1px solid var(--el-color-primary);text-align:center;cursor:pointer}.box-card div[data-v-36305306]:nth-last-of-type(1){border-bottom:none}.components-tree[data-v-36305306]{width:max-content;min-width:100%;margin:0%}.components-tree .custom-tree-node[data-v-36305306]{display:flex;align-items:center}.components-tree .custom-tree-node .custom-tree-node-icon[data-v-36305306]{margin-right:.4rem}.components-tree[data-v-36305306]{margin-bottom:0%}.components-tree[data-v-36305306] .el-tree-node__children .el-tree-node__content{height:2.2857142857rem;padding-right:10px}.components-tree[data-v-36305306] .el-tree .el-icon svg{display:none!important;height:0;width:0}.components-tree[data-v-36305306] .el-tree-node__expand-icon{font-size:16px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded{-webkit-transform:rotate(0deg);transform:rotate(0)}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon:before{background:url(/zgj-web/assets/tree-fangxiang-zuo-449ab744.svg) no-repeat 0;content:"";display:block;width:18px;height:18px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded:before{background:url(/zgj-web/assets/tree-fangxiang-xia-767e704d.svg) no-repeat 0 0;content:"";display:block;width:18px;height:18px;margin-top:4px}.components-tree[data-v-36305306] .el-tree .is-leaf.el-tree-node__expand-icon:before{display:block;background:none!important;content:"";width:18px;height:18px}.components-tree[data-v-36305306] .el-tree-node__expand-icon.is-leaf{width:16px;display:block}\n',document.head.appendChild(L),{setters:[e=>{t=e.g,n=e.H,l=e.i,o=e.n,d=e.a1},e=>{r=e.aA,i=e.ay,c=e.ag,u=e.aF,s=e.as,g=e.o,m=e.x,p=e.bj,h=e.p,v=e.w,b=e.aT,y=e.m,f=e.aa,x=e.a$,w=e.n,N=e.bl,j=e.bb,I=e.ab,_=e.aw,k=e.at},e=>{D=e._},e=>{z=e._},e=>{P=e.J},e=>{A=e.a},e=>{C=e.a},e=>{T=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=[{prop:"organName",label:"部门名称","min-width":150,fixed:"left",show:!0},{prop:"organNo",label:"部门编码","min-width":150,show:!0},{prop:"organTypeName",label:"组织类型","min-width":150,show:!0},{prop:"organUserNum",label:"部门人数",sortable:"custom",align:"center",width:150,show:!0},{prop:"organLeaderName",label:"部门主管","min-width":150,show:!0},{prop:"organPName",label:"上级组织","min-width":150,show:!0},{prop:"flag",label:"状态",show:!0},{prop:"caozuo",label:"操作","min-width":250,fixed:"right",align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"status"},{name:"t-zgj-Delete"}]}],L=e=>(_("data-v-36305306"),e=e(),k(),e),B={class:"title"},V=L((()=>h("div",null,"单位与部门管理",-1))),O={class:"title-more"},E={class:"title-more-add"},S={class:"title-more-down"},U=L((()=>h("img",{class:"button-icon",src:D,alt:"",srcset:""},null,-1))),F=v("导入"),$={class:"components-tree"},q=v("部门"),H=v("单位"),J={class:"select-box-contBox"},R=L((()=>h("div",{class:"ap-box-contBox-icon"},[h("img",{class:"ap-box-contBox-icon-img",src:z,alt:""})],-1))),W={class:"select-box-contBox"},M=L((()=>h("div",{class:"ap-box-contBox-icon"},[h("img",{class:"ap-box-contBox-icon-img",src:z})],-1))),Y={class:"header-div"},K=L((()=>h("img",{src:d},null,-1))),Q={class:"content-div"};e("default",t({setup(e){const t=r(!1),d=r([]),_=r(!1),k=r(!1),D=r(!1),z=r(null),L=r([]),X=r(["organ"]),Z=r(null),G=r("-1"),ee=r(null),ae=r(!1),te=r(!1),ne=r(null),le=r(null),oe=r(!1),de=r(null),re=r(null),ie=r(null),ce=r(null),ue=r(null),se=r([]),ge=r(null),me=i({organId:"",organNo:"",organName:"",organTypeId:"department",organPid:"",organPName:"",organLeaderId:"",organLeaderName:"",readme:""}),pe=i({organName:[{required:!0,message:"请输入部门名称",trigger:"change"}],organPName:[{required:!0,message:"请选择上级部门",trigger:"change"}]}),he=i({showOneAction:{show:!1,header:{data:""},content:{data:""}},componentsSearchForm:{data:[{id:"keyWord",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"部门名称/部门编码"}},{id:"flag",label:"状态",type:"select",inCommonUse:!0,options:[{label:"启用",value:1},{label:"停用",value:0}],defaultAttribute:{placeholder:"请选择"}}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:a},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!0,"show-checkbox":!1,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"organId","current-node-key":"-1",accordion:!0},defaultProps:{label:"organName",children:"children",isLeaf:"haveChildren"},value:""},componentsBatch:{selectionData:[],data:[{name:"t-zgj-dept.BatchDeactivation"},{name:"t-zgj-dept.BatchEnable"},{name:"t-zgj-seal.BatchDelete"}]}});function ve(e,a,n,l){G.value=e.organId,t.value=!0,d.value=[{value:"detail",params:e.organId},{value:"organizer",params:e.organId}]}function be(e,a,t,n){"t-zgj-Edit"===t.name?(_.value=!0,me.organId=a.organId,I((()=>{z.value.resetFields(),A.detail(a.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||l("accountInfo")&&l("accountInfo").userDepartName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))):"t-zgj-F_SEAL_INFO_UP"===t.name||"t-zgj-F_SEAL_INFO_DOWN"===t.name||("status"===t.name?(ce.value="启用"===a.flag?"t-zgj-Disable":"t-zgj-Enable",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示","启用"===a.flag?he.showOneAction.content.data="是否停用该部门？":he.showOneAction.content.data="是否启用该部门？"):"t-zgj-Delete"===t.name&&(ce.value="t-zgj-Delete",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门？"))}function ye(){"t-zgj-Enable"===ce.value?A.batchEnable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Disable"===ce.value?A.batchDisable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Delete"===ce.value&&A.batchDelete([ie.value]).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{oe.value=!1,he.showOneAction.show=!1}))}function fe(e,a){de.value=e.name,"t-zgj-dept.BatchDeactivation"===e.name?re.value={header:{data:"批量停用"},content:{data:"是否批量停用这些部门？"}}:"t-zgj-dept.BatchEnable"===e.name?re.value={header:{data:"批量启用"},content:{data:"是否批量启用这些部门？"}}:"t-zgj-seal.BatchDelete"===e.name&&(re.value={header:{data:"批量删除"},content:{data:"是否批量删除这些部门？"}}),he.componentsBatch.selectionData=a,oe.value=!0}const xe=e=>{D.value=!0,Z.value=e,"organP"===e?(X.value=["organ"],L.value=me.organPid?[{id:me.organPid,name:me.organPName,type:"organ"}]:[]):(X.value=["user"],L.value=me.organLeaderId?[{id:me.organLeaderId,name:me.organLeaderName,type:"user"}]:[]),setTimeout((()=>{k.value=!0}),200)},we=()=>{k.value=!1,setTimeout((()=>{D.value=!1}),200)},Ne=()=>{_.value=!0,I((()=>{me.organPid="",me.organId="",me.organPName="",me.organLeaderName="",z.value.resetFields()}))},je=r(!0),Ie=()=>{z.value.validate((e=>{e&&(me.organId?(je.value=!1,A.edit(me).then((()=>{_.value=!1,ue.value.loaded=!1,ue.value.expand(),ee.value.reloadData(),je.value=!0})).catch((()=>{je.value=!0}))):(ue.value=ge.value.getNode(me.organPid),je.value=!1,A.add(me).then((()=>{ue.value&&(he.componentsTree.defaultAttribute["current-node-key"]=me.organPid,G.value=me.organPid,_.value=!1,ue.value.loaded=!1,ue.value.expand()),ee.value.reloadData(),je.value=!0})).catch((()=>{je.value=!0}))))}))},_e=e=>{"organP"===Z.value?(me.organPid=e.length?e[0].id:"",me.organPName=e.length?e[0].name:""):(me.organLeaderId=e.length?e[0].id:"",me.organLeaderName=e.length?e[0].name:"")};function ke(e,a){if(0===e.level)ue.value=e,A.subOrganList(-1).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),se.value=e.data,a([{organName:l("accountInfo")&&l("accountInfo").userDepartName,organId:"-1",haveChildren:!1,children:[]}])))).then((()=>{I((()=>{const e=ue.value.childNodes[0];e&&(e.expanded=!0),e&&e.loadData()}))}));else{if(1===e.level)return a(se.value);A.subOrganList(e.data.organId).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),a(e.data))))}}function De(e,a){ue.value=a,G.value=e.organId,ee.value.reloadData()}function ze(e,a,t){1===t.level?te.value=!1:te.value=!0,ae.value=!0,le.value=a,ne.value.$el.style.right=0,ne.value.$el.style.top=e.layerY+10+"px",document.addEventListener("click",Pe)}function Pe(){ae.value=!1,document.removeEventListener("click",Pe)}function Ae(){_.value=!0,I((()=>{z.value.resetFields(),me.organPid=le.value.organId,me.organPName=le.value.organName}))}function Ce(){_.value=!0,me.organId=le.value.organId,I((()=>{z.value.resetFields(),A.detail(le.value.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||JSON.parse(localStorage.getItem("departLists")).find((e=>e.tenantId===localStorage.getItem("tenantId"))).tenantName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))}function Te(){ie.value=le.value.organId,ce.value="t-zgj-Delete",he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门"}const Le=()=>{"t-zgj-dept.BatchDeactivation"===de.value?A.batchDisable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{oe.value=!1})):"t-zgj-dept.BatchEnable"===de.value?A.batchEnable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{oe.value=!1})):"t-zgj-seal.BatchDelete"===de.value&&A.batchDelete(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{oe.value=!1}))};return c((()=>{})),(e,a)=>{const l=u("el-button"),r=u("el-dropdown-item"),i=u("el-dropdown-menu"),c=u("el-dropdown"),I=u("el-tree"),A=u("el-card"),Z=u("el-input"),le=u("el-form-item"),de=u("el-radio"),ie=u("el-radio-group"),ce=u("el-form"),ue=o,se=u("JyElMessageBox");return s(),g("div",null,[m(P,{url:"/organ/page",ref_key:"table",ref:ee,componentsSearchForm:x(he).componentsSearchForm,componentsTableHeader:x(he).componentsTable.header,componentsBatch:x(he).componentsBatch,queryParams:{organId:G.value},statusColoum:"flag",openValue:"启用",hasTree:"",tableClick:"organName",onCellClick:ve,onCustomClick:be,onClickBatchButton:fe},{title:p((()=>[h("div",B,[V,h("div",O,[h("div",E,[m(l,{type:"primary",onClick:Ne},{default:p((()=>[v("+ "+b(e.$t("t-zgj-add")),1)])),_:1})]),h("div",S,[m(c,{"popper-class":"more-operation-dropdown"},{dropdown:p((()=>[m(i,null,{default:p((()=>[m(r,null,{default:p((()=>[F])),_:1})])),_:1})])),default:p((()=>[m(l,null,{default:p((()=>[U,h("span",null,b(e.$t("t-zgj-table.more.Operation")),1)])),_:1})])),_:1})])])])])),tree:p((()=>[h("div",$,[je.value?(s(),y(I,f({key:0,ref_key:"deptTreeRef",ref:ge,data:x(he).componentsTree.data,props:x(he).componentsTree.defaultProps},x(he).componentsTree.defaultAttribute,{lazy:"",load:ke,onCurrentChange:De,onNodeContextmenu:ze}),null,16,["data","props"])):w("",!0),N(m(A,{class:"box-card",ref_key:"card",ref:ne,"body-style":{padding:"0 10px"}},{default:p((()=>[h("div",{class:"add",onClick:Ae},"添加子部门"),N(h("div",{class:"delete",onClick:Ce}," 编辑部门 ",512),[[j,te.value]]),N(h("div",{class:"edit",onClick:Te}," 删除部门 ",512),[[j,te.value]])])),_:1},512),[[j,ae.value]])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),m(T,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),modulesName:"unit_and_department",detailParams:d.value},null,8,["modelValue","detailParams"]),m(ue,{"onUpdate:show":a[9]||(a[9]=e=>_.value=e),show:_.value,title:x(me).organId?e.$t("t-zgj-Edit"):e.$t("t-zgj-add"),centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:900,height:400,onConfirm:Ie},{default:p((()=>[m(ce,{model:x(me),rules:x(pe),ref_key:"vFormLibraryRef",ref:z,"label-width":"80px"},{default:p((()=>[m(le,{label:"部门名称",prop:"organName"},{default:p((()=>[m(Z,{modelValue:x(me).organName,"onUpdate:modelValue":a[1]||(a[1]=e=>x(me).organName=e),placeholder:"请输入",clearable:"",maxlength:"128"},null,8,["modelValue"])])),_:1}),m(le,{label:"组织类型",prop:"organTypeId"},{default:p((()=>[m(ie,{modelValue:x(me).organTypeId,"onUpdate:modelValue":a[2]||(a[2]=e=>x(me).organTypeId=e)},{default:p((()=>[m(de,{label:"department",size:"large"},{default:p((()=>[q])),_:1}),m(de,{label:"unit",size:"large"},{default:p((()=>[H])),_:1})])),_:1},8,["modelValue"])])),_:1}),m(le,{label:"部门编码",prop:"organNo"},{default:p((()=>[m(Z,{modelValue:x(me).organNo,"onUpdate:modelValue":a[3]||(a[3]=e=>x(me).organNo=e),placeholder:"请输入",maxlength:"64"},null,8,["modelValue"])])),_:1}),m(le,{label:"上级部门",prop:"organPName"},{default:p((()=>[h("div",J,[m(Z,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:x(me).organPName,"onUpdate:modelValue":a[4]||(a[4]=e=>x(me).organPName=e),placeholder:"请选择",onClick:a[5]||(a[5]=e=>xe("organP"))},null,8,["modelValue"]),R])])),_:1}),m(le,{label:"部门领导",prop:"organLeaderId"},{default:p((()=>[h("div",W,[m(Z,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:x(me).organLeaderName,"onUpdate:modelValue":a[6]||(a[6]=e=>x(me).organLeaderName=e),placeholder:"请选择",onClick:a[7]||(a[7]=e=>xe("leaderUser"))},null,8,["modelValue"]),M])])),_:1}),m(le,{label:"备注",prop:"readme"},{default:p((()=>[m(Z,{modelValue:x(me).readme,"onUpdate:modelValue":a[8]||(a[8]=e=>x(me).readme=e),type:"textarea",maxlength:"512"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","title","confirmText","concelText"]),D.value?(s(),y(x(n),{key:0,show:k.value,"onUpdate:show":we,searchSelected:L.value,"onUpdate:searchSelected":_e,tabsShow:X.value,multiple:!1,hasTopRoot:!0},null,8,["show","searchSelected","tabsShow"])):w("",!0),m(x(C),{"onUpdate:modelValue":a[10]||(a[10]=e=>oe.value=!1),show:oe.value,selectionData:x(he).componentsBatch.selectionData,showToastDialogContent:re.value,label:"organName",onSureAction:Le},null,8,["show","selectionData","showToastDialogContent"]),m(se,{modelValue:x(he).showOneAction.show,"onUpdate:modelValue":a[11]||(a[11]=e=>x(he).showOneAction.show=e),mode:1,showClose:!1,defaultAttribute:{},onConfirmClick:ye},{header:p((()=>[h("div",Y,[K,h("span",null,b(x(he).showOneAction.header.data),1)])])),content:p((()=>[h("div",Q,b(x(he).showOneAction.content.data),1)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-36305306"]]))}}}));
