import{_ as e}from"./back-bdc75944.js";import{c as a}from"./Layout-feb68f7d.js";import{j as l,a3 as t}from"./chunk-vform-2b3347cb.js";import{J as s}from"./JyTable-628cc67b.js";import{c as o}from"./documentsDetails-b253db70.js";import{a as n}from"./sealApplyIntellect-c08352bc.js";import{s as i}from"./listApprovingJson-a70956ef.js";import{a as p}from"./actionOneDialog-b6e575d7.js";import{a as r}from"./actionMoreDialog-98d12403.js";import{aA as c,ay as m,aF as u,as as d,o as h,x as y,bj as g,p as b,a$ as D,w as v}from"./chunk-vue-0eb5cee7.js";import"./chunk-element-plus-b8773542.js";import"./chunk-ant-design-vue-bd7f8294.js";import"./chunk-@ant-design-icons-svg-8f5189a2.js";import"./chunk-@ant-design-icons-vue-ff9a333c.js";import"./sangedian-6ea00dcf.js";import"./searchForm-2119928b.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-1313c7d8.js";import"./pagination-15aedd3b.js";import"./batch-9eab7073.js";import"./index-c5d7142e.js";import"./cha-kong-c10eac4e.js";import"./JyTabs-8188306a.js";/* empty css                                                               */import"./table-82da38c0.js";/* empty css                                                                         */import"./portion-f294dbd1.js";/* empty css                                                                */import"./yuan-hui-31c99901.js";const f={class:"breadcrumb"},w=v(" 用印记录 "),S=v(" 查看已作废单据 "),j={class:"title"},x={class:"title-desc"},A=v(" 查看已作废单据 "),B=b("div",null,null,-1),I={class:"ap-box"},_={name:"VoidApply"},J=Object.assign(_,{setup(v){const _=c(null),J=l(),E=c(null),M=m({componentsTitle:{more:{data:[{name:"查看已作废的单据",codle:"1"}]}},componentsSearchForm:{data:i,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:[{prop:"useSealFileName",label:"文件名称","min-width":150,fixed:"left",show:!0},{prop:"useSealApplyNo",label:"单据编号",width:180,show:!0},{prop:"fileTypeName",label:"文件类型","min-width":150,show:!0},{prop:"sealName",label:"印章名称","min-width":150,show:!0},{prop:"applyUserName",label:"申请人","min-width":150,show:!0},{prop:"applyOrganName",label:"申请部门","min-width":150,show:!0},{prop:"applyStatus",label:"审批状态",align:"center",width:150,show:!0},{prop:"useSealStateName",label:"用印状态",align:"center",width:150,show:!0},{prop:"applyDatetime",label:"申请时间",width:180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":150,show:!0,align:"center",rankDisplayData:[{name:"t-zgj-sealInfoDelete.restore"},{name:"t-zgj-File.Delete"}]}]},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"t-zgj-seal.BatchDelete"}]},JyElMessageBox:{type:"",column:{},flag:"",show:!1,header:{data:""},content:{data:""}},computedData:[],showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}});function N(e,a,l,t){"useSealFileName"===a.property&&(M.componentsDocumentsDetails.show=!0,n.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,l=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:"APPROVAL"===a.useSealStateId?"用印审批中":"USING"===a.useSealStateId?"智能用印中":"",iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?l.splice(l.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{l.splice(l.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),M.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:l}})),n.intellect({useSealApplyId:e.useSealApplyId}).then((e=>{var a;(null==(a=e.data)?void 0:a.length)?M.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!0,data:e.data}:M.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!1,data:[]}})),n.attachment({useSealApplyId:e.useSealApplyId}).then((e=>{var a,l;(null==(a=e.data.fileInfos)?void 0:a.length)||(null==(l=e.data.fileInfoAdds)?void 0:l.length)?M.componentsDocumentsDetails.visible[0].accessory={show:!0,printedData:e.data.fileInfos,additionalData:e.data.fileInfoAdds}:M.componentsDocumentsDetails.visible[0].accessory={show:!1,printedData:[],additionalData:[]}})))}function T(e,a,l,t){M.JyElMessageBox.type=l.name,M.JyElMessageBox.column=a,"t-zgj-sealInfoDelete.restore"===l.name&&(M.JyElMessageBox.header.data="提示？",M.JyElMessageBox.content.data="还原后本次申请送审将被还原，请问确定要还原吗？",M.JyElMessageBox.show=!0),"t-zgj-File.Delete"===l.name&&(M.JyElMessageBox.header.data="提示？",M.JyElMessageBox.content.data="删除会把申请单连同对应的附件均删除，删除后可释放存储空间，请问确定要删除么？",M.JyElMessageBox.show=!0)}function k(){M.componentsDocumentsDetails.show=!1}const F=()=>{"t-zgj-sealInfoDelete.restore"===M.JyElMessageBox.type?n.return({sealUseApplyIds:[M.JyElMessageBox.column.useSealApplyId]}).then((()=>{t("还原成功"),E.value.reloadData()})).finally((()=>{M.JyElMessageBox.show=!1})):"t-zgj-File.Delete"===M.JyElMessageBox.type&&n.delete({sealUseApplyIds:[M.JyElMessageBox.column.useSealApplyId]}).then((()=>{E.value.reloadData(),t("删除成功")})).finally((()=>{M.JyElMessageBox.show=!1}))};function C(e,a){M.componentsBatch.selectionData=a,_.value={header:{data:"批量删除"},content:{data:"删除会把申请单，连同对应的附件均删除，删除后可释放存储空间，请问确定批量删除么？"}},M.showToastDialog.show=!0}const U=()=>{const e=M.componentsBatch.selectionData,a=[];e.forEach((e=>{a.push(e.useSealApplyId)})),n.delete({sealUseApplyIds:a}).then((e=>{E.value.reloadData(),t("删除成功"),M.showToastDialog.show=!1}))};return(l,t)=>{const n=u("el-breadcrumb-item"),i=u("el-breadcrumb");return d(),h("div",null,[y(a,{Layout:"breadcrumb,title,custom,fixed,table"},{breadcrumb:g((()=>[b("div",f,[y(i,{separator:"/"},{default:g((()=>[y(n,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:g((()=>[w])),_:1}),y(n,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:g((()=>[S])),_:1})])),_:1})])])),title:g((()=>[b("div",j,[b("div",x,[b("img",{class:"title-desc-img",src:e,alt:"",onClick:t[0]||(t[0]=e=>D(J).go(-1))}),A]),B])])),table:g((()=>[y(s,{url:"/sealApply/listInvalid",ref_key:"jyTable",ref:E,hasTabs:"",componentsSearchForm:D(M).componentsSearchForm,componentsTableHeader:D(M).componentsTable.header,componentsBatch:D(M).componentsBatch,computedData:"listApproving"===l.currentActiveName?D(M).computedData:[],tableClick:"useSealFileName",onCellClick:N,onCustomClick:T,onClickBatchButton:C},null,8,["componentsSearchForm","componentsTableHeader","componentsBatch","computedData"])])),_:1}),b("div",I,[y(o,{show:D(M).componentsDocumentsDetails.show,visible:D(M).componentsDocumentsDetails.visible,onClickClose:k},null,8,["show","visible"])]),y(D(r),{"onUpdate:modelValue":t[1]||(t[1]=e=>D(M).showToastDialog.show=!1),show:D(M).showToastDialog.show,selectionData:D(M).componentsBatch.selectionData,showToastDialogContent:_.value,label:"useSealFileName",onSureAction:U},null,8,["show","selectionData","showToastDialogContent"]),y(p,{modelValue:D(M).JyElMessageBox.show,"onUpdate:modelValue":[t[2]||(t[2]=e=>D(M).JyElMessageBox.show=e),D(M).JyElMessageBox.show],JyElMessageBox:D(M).JyElMessageBox,onSubmitElMessageBox:F},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"])])}}});export{J as default};
