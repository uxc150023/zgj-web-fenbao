System.register(["./chunk-vform-legacy-aa92d37d.js","./chunk-vue-legacy-ac482c0f.js","./chunk-element-plus-legacy-93ba4a6a.js"],(function(e,l){"use strict";var t,a,i,d,c,n,s,r,u,o,h,p,v,f,g,m,y,b,x,S,w,C,E,k,P,L,j,N,T,V,M,O,A,F,B=document.createElement("style");return B.textContent='.select-search[data-v-3e01129c]{padding:10px 20px 10px 0}.select-crumbs[data-v-3e01129c]{padding:6px 10px 6px 0;margin-left:-12px}.select-crumbs .custom-bread[data-v-3e01129c]{display:flex;flex-wrap:wrap}.select-crumbs .custom-bread .bread-item[data-v-3e01129c]{display:flex;align-items:center;cursor:pointer}.select-crumbs .custom-bread .bread-home .item[data-v-3e01129c]{margin-right:10px;padding:1px 4px;border-radius:2px;height:24px;line-height:23px}.select-crumbs .custom-bread .bread-home .item[data-v-3e01129c]:hover{color:var(--jy-primary-6);background:rgba(208,150,62,.1)}.select-crumbs .custom-bread .item-text[data-v-3e01129c]{padding:1px 4px;border-radius:2px;height:24px;line-height:23px;margin:0 10px;max-width:103px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select-crumbs .custom-bread .item-text[data-v-3e01129c]:hover{color:var(--jy-primary-6);background:rgba(208,150,62,.1)}.select-list[data-v-3e01129c]{padding:4px 0 0;flex:1;height:calc(100% - 70px)}svg[data-v-13e08b3e]{vertical-align:middle}.selection-content[data-v-13e08b3e]{display:flex;height:100%;position:relative}.selection-content[data-v-13e08b3e]:after{content:"";position:absolute;top:-12px;left:50%;height:calc(100% + 40px);width:1px;background:rgba(0,0,0,.05)}.selection-content .selection-left[data-v-13e08b3e]{position:relative;flex:1;display:flex;flex-direction:column;height:100%}.selection-content .null-img[data-v-13e08b3e]{height:calc(100% - 40px);display:flex;justify-content:center;align-items:center}.selection-content .null-img img[data-v-13e08b3e]{width:171px;height:122.5px}.selection-content .select-right-column[data-v-13e08b3e]{display:flex;justify-content:space-between;align-items:center}.selection-content .select-right-column .select-right-label[data-v-13e08b3e]{display:flex}.selection-content .select-right-column .select-label[data-v-13e08b3e]{font-size:14px;color:rgba(0,0,0,.85);width:280px;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.selection-content .select-right-column .select-close[data-v-13e08b3e]{cursor:pointer;height:20px;display:flex;align-items:center}.selection-content .select-right-column .clear-t[data-v-13e08b3e]{color:#d04d3e;font-size:14px;cursor:pointer}.selection-content .select-right-column .clear-n[data-v-13e08b3e]{color:rgba(0,0,0,.85)}.selection-content .p[data-v-13e08b3e]{padding:8px 24px}.selection-content .c-p[data-v-13e08b3e]{padding:6px 24px 12px}.el-scrollbar__view{height:100%}.select-right-column .el-switch{height:20px}\n',document.head.appendChild(B),{setters:[e=>{t=e.B,a=e.g,i=e.U,d=e.W,c=e.X,n=e.Y,s=e.Z,r=e.k,u=e.I,o=e.$,h=e.n,p=e.a0},e=>{v=e.k,f=e.ay,g=e.aA,m=e.aF,y=e.as,b=e.o,x=e.p,S=e.x,w=e.a$,C=e.F,E=e.aD,k=e.bj,P=e.aT,L=e.bl,j=e.bb,N=e.m,T=e.n,V=e.aw,M=e.at,O=e.w,A=e.ae},e=>{F=e.E}],execute:function(){const l={treeList:e=>t({method:"GET",url:"/fileType/queryList",params:e})},B={style:{height:"100%"}},J={class:"select-search"},U={class:"select-crumbs user-select"},_={class:"custom-bread"},z=["onClick"],H={class:"item-arrow"},Z={width:"6",height:"10",viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$=[(e=>(V("data-v-3e01129c"),e=e(),M(),e))((()=>x("path",{d:"M3.78132 5.00001L0.481323 1.70001L1.42399 0.757342L5.66666 5.00001L1.42399 9.24268L0.481323 8.30001L3.78132 5.00001Z",fill:"black","fill-opacity":"0.25"},null,-1)))],q={class:"select-list user-select"},D={props:{apiModule:{type:String,default:""},allSelected:{type:Array,default:()=>[]},initQueryParams:{type:Object,default:()=>({})},multiple:{type:Boolean,default:!1}},emits:["update:allSelected"],setup(e,{expose:t,emit:a}){const u=e,o=v({get:()=>JSON.parse(JSON.stringify(u.allSelected)),set(e){a("update:allSelected",e)}}),h=[{id:"-1",pid:"0",name:"文件类型",haveChildren:!0,type:"fileType",idFullPathSet:"-1"}],p=f({lists:[]}),V=f({data:[]}),M=g([]),O=e=>new Promise(((t,a)=>{l.treeList(e).then((e=>{t(e)})).catch((e=>{a(e)}))})),A=g(""),F=g(!1),D=f({data:[]}),I=r((()=>{O({keyword:A.value,...u.initQueryParams}).then((e=>{const l=JSON.parse(JSON.stringify(e.data));0!==l&&(l.forEach((e=>{e.type="fileType"})),D.data=l),F.value=!0,A.value||(F.value=!1),0!==o.value.length&&0!==D.data&&D.data.forEach((e=>{o.value.forEach((l=>{e.id===l.id&&(e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0)}))}))}))}),500),Q=()=>{A.value?I():F.value=!1};function G(e,l,t){if(t&&"all"===t)return W(e,l),X(e,l),void D.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}));u.multiple?(Y(e,l),R(e,l),D.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}))):V.data.forEach((t=>{t.id===e.id?(t.selectedStatus=l,o.value=l?[e]:[]):t.selectedStatus=0}))}const K=(e,l)=>{G(e,l)},W=(e,l)=>{const t=e[0].pid;!function e(a){a.forEach((a=>{if(a.id===t&&a.children.forEach((e=>{e.selectedStatus=l})),a.children&&a.children.length>0)return e(a.children)}))}(M.value)},X=(e,l)=>{if(0===l){const e=[];V.data.forEach((l=>{l.selectedStatus=0,e.push(l.id)})),o.value=o.value.filter((l=>!e.includes(l.id)))}else{V.data.forEach((e=>{e.selectedStatus=2}));const l=[];e.forEach((e=>{l.push(e.id)})),o.value=o.value.filter((e=>!l.includes(e.id))).concat(e)}},Y=(e,l)=>{!function t(a){a.forEach((a=>{if(a.id===e.id&&(a.selectedStatus=l),a.children&&a.children.length>0)return t(a.children)}))}(M.value)},R=(e,l)=>{if(0===l){V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0)})),o.value=o.value.filter((l=>l.id!==e.id));const{includeChild:t}=o.value.find((l=>l.id===e.id));function a(l){l.forEach((l=>{if(l.id===e.id&&e.haveChildren&&(l.includeChild="0"),l.id===e.id&&"1"===t){function i(e){e.forEach((e=>{if(e.selectedStatus=0,e.disabled=!1,e.children&&e.children.length>0)return i(e.children)}))}l.children&&i(l.children)}if(l.children&&l.children.length>0)return a(l.children)}))}a(M.value),F.value&&D.data.forEach((l=>{!l.idFullPathSet.includes(e.id)||"1"!==e.includeChild&&e.includeChild||l.id===e.id||(l.disabled=!1,l.selectedStatus=0)}))}else{const i=JSON.parse(JSON.stringify(o.value));F.value&&D.data.forEach((l=>{l.id===e.id&&(l.id===e.id&&e.haveChildren&&(l.includeChild="0"),i.splice(o.value.length,0,l))})),V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=2,F.value||i.splice(o.value.length,0,l))})),o.value=i}F.value&&D.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}))},ee=(e,l)=>{const t=[];if(!e)return[];if(0===e.length)return t.push({curmbsName:"文件类型",id:"-1"}),t;const a=function(e,l){for(let i=0;i<e.length;i++){const d=e[i];if(t.push({curmbsName:d.name,id:d.id}),d.id===l)return t;if(d.children){const e=a(d.children,l);if(e)return e}t.pop()}};return a(e,l),t},le=g([]),te=e=>{const l=g([]);if(function t(a){a.forEach((a=>{if(a.id===e.id&&(l.value=a.children),a.children&&a.children.length>0)return t(a.children)}))}(M.value),l.value&&l.value.length>0){V.data=ae(l.value,o.value);const t=ee(M.value,e.id);return void(le.value=t)}O({...u.initQueryParams,parentId:e.id}).then((l=>{const t=l.data;if(t.forEach((e=>{e.selectedStatus=0,e.includeChild="string"!=typeof e.includeChild?"0":e.includeChild,e.type="fileType",e.disabled=!!e.disabled})),V.data=ae(t,o.value),"-1"===e.id)return p.lists=t.concat(h),void(M.value=n(p.lists,"id","pid"));M.value=n(function(e,l="id"){if(Array.isArray(e))return e.reduce(((e,t)=>e.some((e=>e[l]===t[l]))?e:[...e,t]),[])}([...s(M.value),...V.data]),"id","pid")}));const t=ee(M.value,e.id);le.value=t};function ae(e,l){return e.forEach((e=>{0===l.length?e.selectedStatus=0:l.forEach((l=>{e.id===l.id&&(e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0)}))})),e}const ie=(e,l)=>{e.forEach((e=>{if(e.id===l.id&&(e.selectedStatus=0,e.disabled=!1,e.includeChild="0"),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&(e.selectedStatus=0,e.disabled=!1),e.children&&e.children.length>0)return ie(e.children,l)}))},de=e=>{e.forEach((e=>{if(e.selectedStatus=0,e.disabled=!1,e.children&&e.children.length>0)return de(e.children)}))},ce=(e,l)=>{if(!l.haveChildren)return void(o.value=o.value.filter((e=>e.id!==l.id)));const t=g([]);JSON.parse(JSON.stringify(o.value)).forEach((e=>{e.idFullPathSet.includes(l.id)&&t.value.push(e.id)})),o.value=o.value.filter((e=>!t.value.includes(e.id)))},ne=(e,l)=>{Array.isArray(e)&&0!==e.length&&e.forEach((e=>{if(e.selectedStatus=l?2:0,e.disabled=l,e.children&&e.children.length>0)return ne(e.children,l)}))},se=(e,l)=>{if(!l.haveChildren)return!1;const t=g([]);JSON.parse(JSON.stringify(o.value)).forEach((e=>{e.idFullPathSet.includes(l.id)&&e.id!==l.id&&t.value.push(e.id)})),o.value=o.value.filter((e=>!t.value.includes(e.id)))};return t({concelSelected:e=>{ce(!1,e),ie(M.value,e),V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0,l.disabled=!1),l.idFullPathSet.includes(e.id)&&"1"===e.includeChild&&(l.selectedStatus=0,l.disabled=!1)})),D.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0,l.disabled=!1),l.idFullPathSet.includes(e.id)&&"1"===e.includeChild&&(l.selectedStatus=0,l.disabled=!1)}))},clearSelected:()=>{o.value=[],de(V.data),de(D.data),de(M.value)},changeSwitch:(e,l)=>{se(e,l),function l(t,a){Array.isArray(t)&&0!==t.length&&t.forEach((t=>{if(t.id===a&&ne(t.children,e),t.children&&t.children.length>0)return l(t.children,a)}))}(M.value,l.id);const t=V.data[0].pid;!function e(l,t){Array.isArray(l)&&0!==l.length&&l.forEach((l=>{if(l.id===t&&(V.data=l.children),l.children&&l.children.length>0)return e(l.children,t)}))}(M.value,t),F.value&&D.data.forEach((e=>{e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0,e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"0"===l.includeChild&&e.id!==l.id&&(e.disabled=!1,e.selectedStatus=0)}))},searchSelected:K}),(e,l)=>{const t=m("el-input"),a=m("el-tooltip");return y(),b("div",B,[x("div",J,[S(t,{modelValue:A.value,"onUpdate:modelValue":l[0]||(l[0]=e=>A.value=e),placeholder:"搜索文件类型","prefix-icon":w(i),size:"large",clearable:"",onInput:Q},null,8,["modelValue","prefix-icon"])]),x("div",U,[x("div",_,[(y(!0),b(C,null,E(le.value,((e,l)=>(y(),b("div",{class:"bread-item",key:l},[S(a,{content:e.curmbsName,placement:"bottom","show-after":200},{default:k((()=>[x("div",{class:"item-text",onClick:l=>(e=>{!function l(t,a){for(let i=0;i<=t.length-1;i++){if(t[i].id===e)return void(V.data=t[i].children);if(t[i].children&&t[i].children.length>0)return l(t[i].children)}}(M.value);const l=ee(M.value,e);le.value=l})(e.id)},P(e.curmbsName),9,z)])),_:2},1032,["content"]),x("div",H,[L((y(),b("svg",Z,$,512)),[[j,l!==le.value.length-1]])])])))),128))])]),x("div",q,[L(S(d,{lists:w(V).data,"onUpdate:lists":l[1]||(l[1]=e=>w(V).data=e),onOpen:te,onEmitsDemo:G,rootNode:h,tabActive:"fileType",multiple:u.multiple},null,8,["lists","multiple"]),[[j,!F.value]]),F.value?(y(),N(c,{key:0,lists:w(D).data,"onUpdate:lists":l[2]||(l[2]=e=>w(D).data=e),onOpen:te,onSearchSelected:K,tabActive:"fileType"},null,8,["lists"])):T("",!0)])])}}},I=a(D,[["__scopeId","data-v-3e01129c"]]),Q=e=>(V("data-v-13e08b3e"),e=e(),M(),e),G={class:"selection-content"},K={class:"selection-left user-select"},W={key:0,style:{height:"100%"}},X={style:{display:"flex","flex-direction":"column",flex:"1"}},Y={class:"select-right-column c-p"},R={class:"clear-n"},ee={key:0},le={class:"null-img"},te=[Q((()=>x("img",{src:p},null,-1)))],ae={class:"select-right-label"},ie=Q((()=>x("div",{style:{"margin-right":"10px"}},[x("svg",{width:"12",height:"19",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[x("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 0C0.447715 0 0 0.447715 0 1V10C0 10.5523 0.447715 11 1 11H9C9.55228 11 10 10.5523 10 10V3.38462L8.33333 1.69231L6.66667 0H1ZM4.16667 2.53846H1.66667V3.38462H4.16667V2.53846ZM1.66667 5.07692H8.33333V5.92308H1.66667V5.07692ZM8.33333 7.61539H1.66667V8.46154H8.33333V7.61539Z",fill:"black","fill-opacity":"0.25"})])],-1))),de={style:{display:"flex",height:"25px"}},ce=["onClick"],ne=[Q((()=>x("svg",{width:"16",height:"16",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[x("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.4375 7C0.4375 3.4375 3.4375 0.4375 7 0.4375C10.5625 0.4375 13.5625 3.4375 13.5625 7C13.5625 10.5625 10.5625 13.5625 7 13.5625C3.4375 13.5625 0.4375 10.5625 0.4375 7ZM9.8125 9.71875C10.0938 9.53125 10.0938 9.15625 9.8125 8.875L7.9375 7L9.90625 5.03125C10.1875 4.75 10.1875 4.375 9.90625 4.09375C9.625 3.8125 9.25 3.8125 8.96875 4.09375L7 6.0625L5.125 4.1875C4.9375 3.90625 4.5625 3.90625 4.28125 4.1875C4 4.46875 4 4.84375 4.28125 5.03125L6.15625 6.90625L4.1875 8.875C3.90625 9.0625 3.90625 9.53125 4.1875 9.8125C4.46875 10.0938 4.84375 10.0938 5.125 9.8125L7.09375 7.84375L8.96875 9.71875C9.15625 10 9.53125 10 9.8125 9.71875Z",fill:"black","fill-opacity":"0.25"})],-1)))],se={props:{show:{type:Boolean,default:!1},apiModule:{type:String,default:""},queryParams:{type:Object,default:()=>({})},editDeploy:{type:Boolean,default:!1},searchSelected:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0}},emits:["update:show","update:searchSelected"],setup(e,{emit:l}){const t=e,a=g({width:"calc(100%)",height:"calc(100% - 40px)"}),i=g("");i.value=u.global.t("t-zgj-process.SelectUseType");const d=g(t.searchSelected||[]),c=g(!1),n=(e,l)=>new Promise(((a,i)=>{o[t.apiModule][l](e).then((e=>{a(e)})).catch((e=>{i(e)}))}));if(t.editDeploy){const e=o[t.apiModule].key;n(t.queryParams[e],"selected").then((e=>{c.value=!0}))}else c.value=!0;t.searchSelected.length>0&&(d.value=t.searchSelected.filter((e=>"fileType"===e.type)));const s=g(null),r=()=>{s.value.clearSelected()},p=()=>{l("update:show",!1)},v=g([]),f=()=>{const e={...t.queryParams,organs:d.value};t.editDeploy?n(e,"save").then((e=>{F.success(e.msg||"操作成功"),l("update:show",!1)})).catch((()=>{})):(v.value=v.value.concat(d.value),l("update:searchSelected",v.value),l("update:show",!1),v.value=[])};return(l,n)=>{const u=m("el-switch"),o=m("el-scrollbar"),v=h;return y(),N(v,{"onUpdate:show":t.show,show:t.show,title:i.value,onClose:p,onConfirm:f,confirmText:l.$t("t-zgj-select.confirm"),concelText:l.$t("t-zgj-operation.cancel"),centerBtn:"",height:574,width:900,appendToBody:"",customStyle:a.value},{default:k((()=>[x("div",G,[x("div",K,[c.value?(y(),b("div",W,[S(I,{ref_key:"kdocument",ref:s,initQueryParams:t.queryParams,apiModule:e.apiModule,allSelected:d.value,"onUpdate:allSelected":n[0]||(n[0]=e=>d.value=e),multiple:t.multiple},null,8,["initQueryParams","apiModule","allSelected","multiple"])])):T("",!0)]),x("div",X,[x("div",Y,[x("div",R,[O(P(l.$t("t-zgj-selectPerson.Selected"))+"： ",1),0!==d.value.length?(y(),b("span",ee,P(d.value.length)+" "+P(l.$t("t-zgj-cg-menu-wenjian-leixing")),1)):T("",!0)]),L(x("div",{class:"select-close clear-t",onClick:r},P(l.$t("t-zgj-dialog-clear")),513),[[j,0!==d.value.length]])]),S(o,{class:"selection-right user-select",always:""},{default:k((()=>[L(x("div",le,te,512),[[j,0===d.value.length]]),(y(!0),b(C,null,E(d.value,((e,l)=>(y(),b("div",{class:"select-right-column p",key:l},[x("div",ae,[ie,x("div",{class:"select-label",style:A(e.haveChildren&&t.multiple?"":"width: 340px")},P(e.name),5)]),x("div",de,[e.haveChildren&&t.multiple?(y(),N(u,{key:0,modelValue:e.includeChild,"onUpdate:modelValue":l=>e.includeChild=l,"active-value":"1","inactive-value":"0",style:{"margin-right":"12px"},onChange:l=>{return t=l,a=e,void(s.value&&s.value.changeSwitch(t,a));var t,a}},null,8,["modelValue","onUpdate:modelValue","onChange"])):T("",!0),x("div",{class:"select-close",onClick:l=>{return t=e,void s.value.concelSelected(t);var t}},ne,8,ce)])])))),128))])),_:1})])])])),_:1},8,["onUpdate:show","show","title","confirmText","concelText","customStyle"])}}};e("K",a(se,[["__scopeId","data-v-13e08b3e"]]))}}}));
