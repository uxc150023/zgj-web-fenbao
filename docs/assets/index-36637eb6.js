import{g as e,j as a,n as t}from"./chunk-vform-c3afb8ec.js";import{_ as l}from"./gengduo-caozuo-e0bc5fb4.js";import{J as o}from"./JyTable-f9beb232.js";import{a as r}from"./authorityManagement-4f925147.js";import{E as n}from"./chunk-element-plus-b8773542.js";import{ay as s,aA as d,aF as u,as as i,o as m,x as c,bj as p,p as h,a$ as g,w as f,aT as y,aw as b,at as v}from"./chunk-vue-0eb5cee7.js";import"./chunk-ant-design-vue-bd7f8294.js";import"./chunk-@ant-design-icons-svg-8f5189a2.js";import"./chunk-@ant-design-icons-vue-ff9a333c.js";import"./sangedian-856844bf.js";import"./Layout-442da1ba.js";import"./searchForm-3ad5f987.js";import"./ketanchude-51586196.js";import"./KDocumentTypeDialog-5d4bd993.js";import"./pagination-a44416c5.js";import"./batch-2cbdc416.js";import"./index-d67b578f.js";const w=[{prop:"roleNo",label:"角色编码",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"roleName",label:"角色名称",sortable:!0,"min-width":150,show:!0},{prop:"roleUserNumber",label:"角色人员数",sortable:!0,"min-width":150,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":200,align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"t-zgj-sync.AuthSetting"},{name:"t-zgj-sync.PersonManage"}]}],j=e=>(b("data-v-a7e92323"),e=e(),v(),e),x={class:"title"},B=j((()=>h("div",null,"权限管理",-1))),_={class:"title-more"},A={class:"title-more-add"},N=f(" + 新建 "),k={class:"title-more-down"},z=j((()=>h("img",{class:"button-icon",src:l,alt:"",srcset:""},null,-1))),C=j((()=>h("span",null,"更多操作",-1))),E=f(" 基础数据权限配置 "),I=f("导入"),T=j((()=>h("div",{class:"custom-label"},[h("div",null,"向上继承"),h("div",{class:"msg"},"可以查看下级部门员工创建的数据")],-1))),M=j((()=>h("div",{class:"custom-label"},[h("div",null,"仅自己"),h("div",{class:"msg"},"仅可以查看创建人为自己的数据")],-1))),D=e({setup(e){const l=a(),b=s({componentsSearchForm:{style:{lineStyle:{width:"30%"},labelStyle:{width:"100px"}},data:[{id:"keyWord",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"角色编码/角色名称"}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:w,defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:l})=>{if("2"===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:400,index:1,pageNumber:80},defaultAttribute:{layout:"prev, pager, next, jumper",total:500,"page-sizes":[10,100,200,300,400],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"}]},JyElMessageBox:{show:!1,header:{data:""},content:{data:""}}}),v=d(!1),j=d(!1),D=d(null),V=d(null),S=d(!1),J=d(null),L=s({roleNo:"",roleName:""}),U=s({roleName:[{required:!0,message:"请输入角色名称",trigger:"change"}]}),F=s({userBaseAuth:"1",leaderLowerAuth:!0,roleConfigId:""}),$=d(null);function P(e,a,t,l){}function q(e,a,t,o){"t-zgj-Edit"===t.name&&(v.value=!0,S.value=!0,L.roleNo=a.roleNo,L.roleName=a.roleName,L.roleId=a.roleId),"t-zgj-Delete"===t.name&&(b.JyElMessageBox.header.data="提示？",b.JyElMessageBox.content.data="您确定要删除该记录吗？",b.JyElMessageBox.show=!0,$.value=a.roleId),"t-zgj-sync.AuthSetting"===t.name&&l.push({path:"/system/companyManage/departmentStaff/config",query:{roleId:a.roleId,roleName:a.roleName}}),"t-zgj-sync.PersonManage"===t.name&&l.push({path:"/system/companyManage/departmentStaff/person",query:{roleId:a.roleId,roleName:a.roleName}})}const H=()=>{r.roleDelete($.value).then((e=>{n.success("操作成功"),b.JyElMessageBox.show=!1,J.value.reloadData()}))},R=(e,a)=>{const t=[];a.forEach((e=>{t.push(e.roleId)})),r.batchDelete({roleIds:t}).then((()=>{n.success("操作成功"),J.value.reloadData()}))},W=()=>{r.getSetting().then((e=>{F.userBaseAuth=e.data.userBaseAuth,F.leaderLowerAuth="1"===e.data.leaderLowerAuth,F.roleConfigId=e.data.roleConfigId,j.value=!0}))},K=()=>{D.value.validate((e=>{if(e){let e="";e=S.value?"roleEdit":"roleData",r[e]({...L}).then((e=>{n.success("操作成功"),v.value=!1,J.value.reloadData()}))}}))},O=()=>{V.value.validate((e=>{e&&r.editSetting({userBaseAuth:F.userBaseAuth,leaderLowerAuth:F.leaderLowerAuth?"1":"0",roleConfigId:F.roleConfigId}).then((e=>{n.success("操作成功"),j.value=!1,J.value.reloadData()}))}))},Q=()=>{v.value=!0,S.value=!1,r.generateBizNo().then((e=>{L.roleNo=e.data,L.roleName=""}))};return(e,a)=>{const l=u("el-button"),r=u("el-dropdown-item"),n=u("el-dropdown-menu"),s=u("el-dropdown"),d=u("el-input"),w=u("el-form-item"),$=u("el-form"),X=t,Y=u("el-radio"),Z=u("el-radio-group"),G=u("el-switch"),ee=u("JyElMessageBox");return i(),m("div",null,[c(o,{url:"/role/page",ref_key:"table",ref:J,method:"POST",hasTree:!1,tableClick:"",componentsSearchForm:g(b).componentsSearchForm,componentsTableHeader:g(b).componentsTable.header,componentsBatch:g(b).componentsBatch,onClickBatchButton:R,onCellClick:P,onCustomClick:q},{title:p((()=>[h("div",x,[B,h("div",_,[h("div",A,[c(l,{type:"primary",onClick:Q},{default:p((()=>[N])),_:1})]),h("div",k,[c(s,null,{dropdown:p((()=>[c(n,null,{default:p((()=>[c(r,{onClick:W},{default:p((()=>[E])),_:1})])),_:1}),c(n,null,{default:p((()=>[c(r,null,{default:p((()=>[I])),_:1})])),_:1})])),default:p((()=>[c(l,null,{default:p((()=>[z,C])),_:1})])),_:1})])])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch"]),c(X,{"onUpdate:show":a[2]||(a[2]=e=>v.value=e),show:v.value,title:S.value?e.$t("t-zgj-Edit"):e.$t("t-zgj-add"),centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:600,height:160,onConfirm:K},{default:p((()=>[c($,{model:g(L),rules:g(U),ref_key:"vFormLibraryRef",ref:D,"label-width":"80px"},{default:p((()=>[c(w,{label:"角色编码",prop:"roleNo"},{default:p((()=>[c(d,{modelValue:g(L).roleNo,"onUpdate:modelValue":a[0]||(a[0]=e=>g(L).roleNo=e),disabled:""},null,8,["modelValue"])])),_:1}),c(w,{label:"角色名称",prop:"roleName"},{default:p((()=>[c(d,{modelValue:g(L).roleName,"onUpdate:modelValue":a[1]||(a[1]=e=>g(L).roleName=e),clearable:"",maxlength:"128"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","title","confirmText","concelText"]),c(X,{"onUpdate:show":a[5]||(a[5]=e=>j.value=e),show:j.value,title:"基础数据权限配置",centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:1e3,height:160,onConfirm:O},{default:p((()=>[c($,{model:g(F),ref_key:"vFormSettingRef",ref:V,"label-width":"280px"},{default:p((()=>[c(w,{label:"用户基础权限",prop:"userBaseAuth",style:{margin:"10px 0 38px 0"}},{default:p((()=>[c(Z,{modelValue:g(F).userBaseAuth,"onUpdate:modelValue":a[3]||(a[3]=e=>g(F).userBaseAuth=e)},{default:p((()=>[c(Y,{label:"1"},{default:p((()=>[T])),_:1}),c(Y,{label:"2"},{default:p((()=>[M])),_:1})])),_:1},8,["modelValue"])])),_:1}),c(w,{label:"部门主管是否拥有部门员工权限",prop:"leaderLowerAuth"},{default:p((()=>[c(G,{modelValue:g(F).leaderLowerAuth,"onUpdate:modelValue":a[4]||(a[4]=e=>g(F).leaderLowerAuth=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["show","confirmText","concelText"]),c(ee,{modelValue:g(b).JyElMessageBox.show,"onUpdate:modelValue":a[6]||(a[6]=e=>g(b).JyElMessageBox.show=e),show:g(b).JyElMessageBox.show,defaultAttribute:{},onConfirmClick:H},{header:p((()=>[f(y(g(b).JyElMessageBox.header.data),1)])),content:p((()=>[f(y(g(b).JyElMessageBox.content.data),1)])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-a7e92323"]]);export{D as default};
