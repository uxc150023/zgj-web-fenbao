import{u as e,_ as t}from"./index-b6bf8664.js";import{M as i}from"./ModelApi-caaa3ed7.js";import{g as a}from"./chunk-vform-c3afb8ec.js";import{aA as n,al as s,as as o,o as l,x as d,aa as u}from"./chunk-vue-0eb5cee7.js";import"./home-back-8683dc83.js";import"./logo-55df0058.js";import"./request-util-c02431a4.js";import"./chunk-ant-design-vue-bd7f8294.js";import"./chunk-@ant-design-icons-svg-8f5189a2.js";import"./chunk-element-plus-b8773542.js";import"./chunk-@ant-design-icons-vue-ff9a333c.js";const r={class:"contanier-flow"},f=a({props:{defaultAttribute:{type:Object,default:()=>({})},initObj:{type:Object,deftault:()=>({})}},setup(a,{expose:f}){const m=a,p=e(),c=n(null);s((()=>{p.initFreeFlow(m.initObj.modelId,m.initObj.definitionId),c.value.handleSetData({})}));const j=n(m.initObj.definitionId||null),v=n(m.initObj.modelId||null);return f({handleSetData:e=>c.value.handleSetData(e),designSave:async e=>{const t=c.value.handleSave();if(!t||!v.value)return[{node:[{message:"请配置流程节点",fieldValue:"",field:"node"}]}];if(!v.value)return[{modelId:[{message:"请先填写基础信息",fieldValue:"",field:"modelId"}]}];if(t&&v.value){const a={modelId:v.value,definitionId:j.value,node:t};if("designModel"!==e)await i.updateDesignUpgrade(a);else{const e=await i.saveDesign(a);if(e&&e.success)return m.initObj}}}}),(e,i)=>(o(),l("div",r,[d(t,u({ref_key:"flowDesign",ref:c,top:"100"},m.defaultAttribute),null,16)]))}},[["__scopeId","data-v-fe787917"]]);export{f as default};
