System.register(["./chunk-vue-legacy-ac482c0f.js","./sangedian-legacy-1dcf1313.js","./Layout-legacy-29845d29.js","./searchForm-legacy-3ef53f9c.js","./pagination-legacy-7a6c4477.js","./batch-legacy-e38dd083.js","./chunk-vform-legacy-ec3e4e6b.js","./index-legacy-8b5c66cf.js"],(function(e,t){"use strict";var a,n,o,l,r,c,s,d,i,u,p,m,b,f,y,h,g,v,k,w,x,F,D,j,S,T,E,C,_,B,A,P,q,z,$,R,V=document.createElement("style");return V.textContent=".rankDisplayData .el-button--info.is-link{--el-button-text-color: var(--jy-info-6)}.rankDisplayData .el-button.is-link:hover{color:var(--jy-info-5)}.rankDisplayData .el-button:active{color:var(--jy-info-6)!important}.components-table[data-v-f53d4a4b]{margin:0%;width:100%}.components-table th[data-v-f53d4a4b]{font-weight:var(--jy-font-weight-400)}.components-table[data-v-f53d4a4b] .el-popper{max-width:50%!important}.components-table[data-v-f53d4a4b] .el-dropdown-item-add{color:var(--jy-secondary-5)!important}.components-table[data-v-f53d4a4b] .el-table thead{color:var(--jy-color-text-1);font-size:var(--jy-font-size-body-2);font-weight:var(--jy-font-weight-400)}.components-table[data-v-f53d4a4b] .el-checkbox__input.is-checked .el-checkbox__inner{background-color:var(--jy-primary-6);border-color:var(--jy-primary-6)}.components-table[data-v-f53d4a4b] .el-checkbox__inner:hover{border-color:var(--jy-primary-6)}.components-table[data-v-f53d4a4b] .el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:var(--jy-primary-6);border-color:var(--jy-primary-6)}.components-table[data-v-f53d4a4b] .el-table__body tr.hover-row.current-row>td,.components-table[data-v-f53d4a4b] .el-table__body tr.hover-row.el-table__row--striped.current-row>td,.components-table[data-v-f53d4a4b] .el-table__body tr.hover-row.el-table__row--striped>td,.components-table[data-v-f53d4a4b] .el-table__body tr.hover-row>td{background-color:var(--jy-background-color-1)}.components-table[data-v-f53d4a4b] .el-table tbody tr:hover>td{background-color:var(--jy-background-color-1)}.components-table .flag-cell[data-v-f53d4a4b]{display:flex;align-items:center}.components-table .flag-cell .diot[data-v-f53d4a4b]{width:8px;height:8px;border-radius:50%;margin-right:5px}.components-table .flag-cell .diot-1[data-v-f53d4a4b]{background:rgba(0,0,0,.45)}.components-table .flag-cell .diot-0[data-v-f53d4a4b]{background:rgba(0,128,0,.65)}.components-table .center[data-v-f53d4a4b]{justify-content:center}#tableId[data-v-f53d4a4b]:fullscreen{padding:50px 50px 10px;background:#ffffff}.pagination[data-v-f53d4a4b]{padding:24px 0}.batch[data-v-f53d4a4b]{padding:8px 0}\n",document.head.appendChild(V),{setters:[e=>{a=e.ay,n=e.aA,o=e.be,l=e.ag,r=e.aF,c=e.aG,s=e.as,d=e.o,i=e.x,u=e.bj,p=e.aE,m=e.p,b=e.a$,f=e.ae,y=e.bl,h=e.m,g=e.n,v=e.aT,k=e.F,w=e.aD,x=e.aa,F=e.ac,D=e.bb,j=e.w,S=e.ab,T=e.aw,E=e.at},e=>{C=e.d},e=>{_=e.c},e=>{B=e._},e=>{A=e.c},e=>{P=e.c},e=>{q=e.g,z=e.B,$=e.y},e=>{R=e.a}],execute:function(){const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],V=(()=>{if("undefined"==typeof document)return!1;const e=t[0],a={};for(const n of t)if((null==n?void 0:n[1])in document){for(const[t,o]of n.entries())a[e[t]]=o;return a}return!1})(),H={change:V.fullscreenchange,error:V.fullscreenerror};let N={request:(e=document.documentElement,t)=>new Promise(((a,n)=>{const o=()=>{N.off("change",o),a()};N.on("change",o);const l=e[V.requestFullscreen](t);l instanceof Promise&&l.then(o).catch(n)})),exit:()=>new Promise(((e,t)=>{if(!N.isFullscreen)return void e();const a=()=>{N.off("change",a),e()};N.on("change",a);const n=document[V.exitFullscreen]();n instanceof Promise&&n.then(a).catch(t)})),toggle:(e,t)=>N.isFullscreen?N.exit():N.request(e,t),onchange(e){N.on("change",e)},onerror(e){N.on("error",e)},on(e,t){const a=H[e];a&&document.addEventListener(a,t,!1)},off(e,t){const a=H[e];a&&document.removeEventListener(a,t,!1)},raw:V};Object.defineProperties(N,{isFullscreen:{get:()=>Boolean(document[V.fullscreenElement])},element:{enumerable:!0,get:()=>{var e;return null!==(e=document[V.fullscreenElement])&&void 0!==e?e:void 0}},isEnabled:{enumerable:!0,get:()=>Boolean(document[V.fullscreenEnabled])}}),V||(N={isEnabled:!1});const I=N,Y={class:"components-table",id:"tableId"},L={class:"batch"},M={key:0,class:"switch"},O={key:1},G={class:"diot diot-0"},U={class:"diot diot-1"},J=["index"],Q={key:5,class:"rankDisplayData"},W=(e=>(T("data-v-f53d4a4b"),e=e(),E(),e))((()=>m("span",{class:"el-dropdown-link"},[m("img",{class:"rankDisplayData-node",src:C,alt:""})],-1))),X={class:"pagination"},K={props:{url:{type:String,required:!0},componentsSearchForm:{type:Object},componentsTableHeader:{type:Object},componentsBatch:{type:Object},tableClick:{type:String},isSelection:{type:Boolean,default:!0},isNo:{type:Boolean,default:!0},queryParams:{type:Object},hasTree:{type:Boolean,default:!1},hasTabs:{type:Boolean,default:!1},method:{type:String,default:"GET"},needAutoRequest:{type:Boolean,default:!0},statusColoum:{type:String},openValue:{},breadcrumb:{type:Boolean,default:!1},computedData:{type:Array,default:()=>[]},handleApprovalStatus:{type:Boolean,default:!1}},emits:["cellClick","customClick","clickBatchButton","clickElement","getResult"],setup(e,{expose:t,emit:T}){const E=e,C=a({componentsSearchForm:{style:{lineStyle:{width:"30%"},labelStyle:{width:"100px"}}},componentsTable:{data:[],headers:E.componentsTableHeader,defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:t,rowIndex:a,columnIndex:n})=>{if(t.property===E.tableClick)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,100],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0}}}),q=n(!1),V=n(null),H=n(null),N=n(null);o((()=>E.componentsTableHeader),(()=>{C.componentsTable.headers=E.componentsTableHeader}));const K=(e,t)=>{var a;return null===(a=e.statusList.find((a=>a.key===t[e.prop])))||void 0===a?void 0:a.label},Z=(e,t)=>{T("clickElement",e,t)},ee=n(!1),te=(e,t)=>{"refresh"!==e.name?"fullscreen"!==e.name?T("clickBatchButton",e,C.componentsBatch.selectionData):ae():pe()},ae=()=>{const e=document.getElementById("tableId");I.enabled||(I.isFullscreen?I.exit():I.request(e))};function ne(e){C.componentsTable.headers=e}function oe(e,t,a,n){t.property===E.tableClick&&T("cellClick",e,t,a,n)}function le(e){C.componentsBatch.selectionData=e,C.componentsBatch.selectionData.length>0?C.componentsBatch.defaultAttribute.disabled=!1:C.componentsBatch.defaultAttribute.disabled=!0}function re(e,t,a,n){T("customClick",e,t,a,n)}I.isEnabled&&I.on("change",(()=>{ee.value=I.isFullscreen}));const ce=e=>{e&&"reset"!==e.id||(V.value.clearSort(),E.componentsSearchForm.data.forEach((e=>{"checkButton"===e.type?e.data.forEach((e=>{delete e.checked})):"checkbox"===e.type?e.checkbox.forEach((e=>{e.value=!1})):"derivable"===e.type||"dialog"===e.type?(e.options=[],e.values=e.defaultAttribute.multiple?[]:null):"scopeInput"===e.type?(e.startValue=null,e.endValue=null):delete e.value}))),pe()};function se(e){H.value=e,pe()}const de=e=>{C.componentsPagination.data.index=e,me()},ie=e=>{C.componentsPagination.data.pageNumber=e,pe()};function ue(){return V.value.getSelectionRows()}function pe(e){S((()=>{e||(C.componentsPagination.data.index=1,C.componentsTable.data=[],C.componentsPagination.data.amount=0),me()}))}const me=()=>{q.value=!0;const e={};E.componentsSearchForm.data.forEach((t=>{"checkButton"===t.type?e[t.id]=t.data.filter((e=>e.checked)).map((e=>e.id)).join(","):"checkbox"===t.type?e[t.id]=t.checkbox[0].value?t.checkbox[0].value:null:"picker"===t.type?"daterange"===t.defaultAttribute.type&&t.value&&("array"===t.requestType?(e[t.startRequest?t.startRequest:"beginTime"]=t.value[0]+" 00:00:00",e[t.endRequest?t.endRequest:"endTime"]=t.value[1]+" 23:59:59"):e[t.id]=t.value[0]+" 00:00:00,"+t.value[1]+" 23:59:59"):"derivable"===t.type?t.defaultAttribute.multiple?e[t.requestParams]=t.values&&t.values.length?t.defaultAttribute.joinStr?t.values.join(t.defaultAttribute.joinStr):t.values:null:e[t.requestParams]=t.values:"scopeInput"===t.type?(e[t.startAttribute.id]=t.startValue,e[t.endAttribute.id]=t.endValue):"dialog"===t.type?e[t.id]=t.values||null:e[t.id]=t.value}));const t={current:C.componentsPagination.data.index,size:C.componentsPagination.data.pageNumber,pageNo:C.componentsPagination.data.index,pageSize:C.componentsPagination.data.pageNumber,sorts:H.value?H.value.prop+","+("ascending"===H.value.order?"asc":"desc"):"",...e,...E.queryParams};let a={};a="GET"===E.method?{params:t}:{data:t},z({method:E.method,url:E.url,...a}).then((async e=>{var t,a,n;if(C.componentsTable.data=(null===(t=e.data)||void 0===t?void 0:t.records)||(null===(a=e.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.records)||[],C.componentsPagination.data.amount=0===e.data.total?e.data.total:e.data.total||e.data.data.total,C.componentsPagination.defaultAttribute.total=0===e.data.total?e.data.total:e.data.total||e.data.data.total,E.handleApprovalStatus){const e=await R.listApplyTypeTree({});C.componentsTable.data.forEach((t=>{const a=e.data.find((e=>Number(e.applyTypeId)===t.subType));t.subTypeName=a?a.applyTypeName:"",t.createTime=t.createTime&&$(t.createTime).format("YYYY-MM-DD HH:mm"),t.updateTime=t.updateTime&&$(t.updateTime).format("YYYY-MM-DD HH:mm")}))}q.value=!1,E.computedData.length&&E.computedData.forEach((e=>{C.componentsTable.data.forEach((t=>{t[e.computedData]?z({...e.request,params:{[e.computedData]:t[e.computedData]},hideError:!0}).then((a=>{switch(a.data.data.instanceStatus){case 1:t[e.prop]="审批中";break;case 2:t[e.prop]="已完成";break;case 3:t[e.prop]="拒绝";break;case 4:t[e.prop]="挂起";break;case 5:t[e.prop]="作废";break;default:t[e.prop]="未知"}}),(()=>{t[e.prop]="未知"})):t[e.prop]="未知"}))})),T("getResult",C.componentsTable.data)}),(()=>{q.value=!1}))},be=(e,t,a)=>{};return l((()=>{E.needAutoRequest&&pe()})),t({reloadData:pe,clickSubmit:ce,getSelectionRows:ue,setTableHeader:ne,reloadSearchForm:(e,t)=>{N.value.initFormData(e,t)},toggleFull:ae}),(e,t)=>{const a=r("el-table-column"),n=r("el-switch"),o=r("el-button"),l=r("el-dropdown-item"),S=r("el-dropdown-menu"),T=r("el-dropdown"),z=r("el-table"),$=c("loading");return s(),d("div",null,[i(b(_),{Layout:"title,searchForm,table,pagination,batch"+(E.hasTree?",tree":"")+(E.hasTabs?",tabs":"")+(E.breadcrumb?",breadcrumb":"")},{breadcrumb:u((()=>[p(e.$slots,"breadcrumb",{},void 0,!0)])),title:u((()=>[p(e.$slots,"title",{},void 0,!0)])),tabs:u((()=>[p(e.$slots,"tabs",{},void 0,!0)])),searchForm:u((()=>[m("div",null,[i(b(B),{ref_key:"searchForm",ref:N,data:E.componentsSearchForm.data,butData:E.componentsSearchForm.butData,style:f(b(C).componentsSearchForm.style),onClickSubmit:ce,onReloadData:pe,onClickElement:Z},null,8,["data","butData","style"])])])),tree:u((()=>[p(e.$slots,"tree",{},void 0,!0)])),table:u((()=>[m("div",Y,[m("div",L,[i(b(P),{tableHeader:E.componentsTableHeader,data:E.componentsBatch?E.componentsBatch.data:[],defaultAttribute:b(C).componentsBatch.defaultAttribute,onClickBatchButton:te,onSetTableHeader:ne,isFullscreen:ee.value,"onUpdate:isFullscreen":ae},null,8,["tableHeader","data","defaultAttribute","isFullscreen"])]),y((s(),h(z,x(b(C).componentsTable.defaultAttribute,{ref_key:"table",ref:V,data:b(C).componentsTable.data,onSelectionChange:le,onCellClick:oe,onRowClick:be,onCustomClick:re,onSortChange:se,onGetSelectionRows:ue,style:{width:"100%"}}),{default:u((()=>[E.isSelection?(s(),h(a,{key:0,type:"selection",width:"50"})):g("",!0),E.isNo?(s(),h(a,{key:1,label:"序号",type:"index",width:"55",fixed:"left",align:"center"},{default:u((e=>[m("span",null,v((b(C).componentsPagination.data.index?(b(C).componentsPagination.data.index-1)*b(C).componentsPagination.data.pageNumber:0)+e.$index+1),1)])),_:1})):g("",!0),(s(!0),d(k,null,w(b(C).componentsTable.headers,((t,r)=>(s(),d(k,null,[!1!==t.show?(s(),h(a,x({key:0},t,{key:r,"show-overflow-tooltip":""}),{default:u((a=>["switch"==t.customDisplayType?(s(),d("div",M,[i(n,{modelValue:a.row.switchValue,"onUpdate:modelValue":e=>a.row.switchValue=e},null,8,["modelValue","onUpdate:modelValue"])])):g("",!0),"format"==t.customDisplayType?(s(),d("span",O,v(a.row[t.prop])+" "+v(t.unit),1)):g("",!0),"flag"===t.prop?(s(),d("div",{key:2,class:F(["flag-cell",t.align])},[y(m("div",G,null,512),[[D,a.row[E.statusColoum]===E.openValue]]),y(m("div",U,null,512),[[D,a.row[E.statusColoum]!==E.openValue]]),j(" "+v(a.row[E.statusColoum]===E.openValue?e.$t("t-zgj-Enable"):a.row[E.statusColoum]!==E.openValue?e.$t("t-zgj-dept.Deactivation"):a.row[t.prop]),1)],2)):g("",!0),"format"===t.type?(s(),d("div",{key:3,class:F(["flag-cell",t.align])},v(K(t,a.row)),3)):g("",!0),"custom"==t.customDisplayType?(s(),d("div",{key:4,class:"custom",index:a.$index},[p(e.$slots,"custom_"+t.prop,{value:a.row},void 0,!0)],8,J)):g("",!0),t.rankDisplayData&&t.rankDisplayData.length>0?(s(),d("div",Q,[(s(!0),d(k,null,w(t.rankDisplayData.slice(0,4),((t,n)=>(s(),h(o,{key:n,type:"info",plain:"",onClick:e=>re(a.$index,a.row,t),link:"",text:""},{default:u((()=>[j(v("status"===t.name?a.row[E.statusColoum]!==E.openValue?e.$t("t-zgj-Enable"):e.$t("t-zgj-seal.deactivated"):e.$t(t.name)),1)])),_:2},1032,["onClick"])))),128)),t.rankDisplayData.length>4?(s(),h(o,{key:0,link:""},{default:u((()=>[i(T,null,{dropdown:u((()=>[i(S,null,{default:u((()=>[(s(!0),d(k,null,w(t.rankDisplayData.slice(4),((t,n)=>(s(),h(l,{key:n,onClick:e=>re(a.$index,a.row,t)},{default:u((()=>[j(v("status"===t.name?a.row[E.statusColoum]!==E.openValue?e.$t("t-zgj-Enable"):e.$t("t-zgj-seal.deactivated"):e.$t(t.name)),1)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),default:u((()=>[W])),_:2},1024)])),_:2},1024)):g("",!0)])):g("",!0)])),_:2},1040)):g("",!0)],64)))),256))])),_:3},16,["data"])),[[$,q.value]]),m("div",X,[i(b(A),{data:b(C).componentsPagination.data,defaultAttribute:b(C).componentsPagination.defaultAttribute,onSizeChange:ie,onCurrentChange:de},null,8,["data","defaultAttribute"])])])])),_:3},8,["Layout"])])}}};e("J",q(K,[["__scopeId","data-v-f53d4a4b"]]))}}}));
