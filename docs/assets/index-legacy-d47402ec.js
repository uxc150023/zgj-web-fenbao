System.register(["./tree-legacy-1d9dac05.js","./chunk-vform-legacy-ec3e4e6b.js","./chunk-vue-legacy-ac482c0f.js","./ketanchude-legacy-190a1e99.js","./KDocumentTypeDialog-legacy-b0bf01b1.js","./index-legacy-6540aa2d.js","./index-legacy-8a5046f1.js","./index-legacy-289f9907.js","./index-legacy-4d1ab04e.js","./ModelApi-legacy-8497c83e.js","./chunk-ant-design-vue-legacy-1182637d.js","./chunk-element-plus-legacy-93ba4a6a.js","./index-legacy-8b5c66cf.js","./JyTable-legacy-8d175166.js","./index-legacy-89dbb7e7.js","./tree.vue_vue_type_style_index_0_scoped_c843ec9b_lang-legacy-4d311a3e.js","./chunk-@ant-design-icons-vue-legacy-38d6bf6a.js","./chunk-@ant-design-icons-svg-legacy-99a059a7.js","./home-back-legacy-3fdf8985.js","./logo-legacy-f30834d7.js","./request-util-legacy-edc9c34a.js","./sangedian-legacy-1dcf1313.js","./Layout-legacy-29845d29.js","./searchForm-legacy-3ef53f9c.js","./pagination-legacy-7a6c4477.js","./batch-legacy-e38dd083.js","./index-legacy-5c0b4c74.js","./cha-kong-legacy-279cd6dc.js","./index-legacy-9e64650a.js","./yuan-hui-legacy-2a507678.js"],(function(e,a){"use strict";var l,o,t,d,s,i,n,r,c,p,u,f,m,g,y,v,h,b,w,x,I,M,T,k,j,D,A,V,_,B,S,C,U,N,z,E,L,F,O,q,R,J,P,$,H,W,Y,K,G,Q,X,Z=document.createElement("style");return Z.textContent='@charset "UTF-8";.flowManage-basics-info[data-v-b5f496d1]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5)}.flowManage-basics-info .info-box[data-v-b5f496d1]{width:680px;margin:0% auto;text-align:center}.flowManage-basics-info .info-box .info-title[data-v-b5f496d1]{margin-top:3rem;font-size:var(--jy-font-size-title-2);color:var(--jy-color-text-1)}.flowManage-basics-info .info-box .info-from[data-v-b5f496d1]{margin-top:1.5rem}.flowManage-basics-info[data-v-b5f496d1] .el-form .el-form-item__label{margin-bottom:0%}.flowManage-basics-info[data-v-b5f496d1] .el-form .el-select{width:100%}.box-icon[data-v-b5f496d1]{position:absolute;right:.8rem;cursor:pointer;height:50%;display:flex;align-items:center}.box-icon .box-icon-img[data-v-b5f496d1]{height:100%}.el-form-item[data-v-b5f496d1]{margin-bottom:24px!important}.contbox{width:100%;position:relative;display:flex;align-items:center}.contbox .el-input__suffix{display:none}.flowManage-Association-form[data-v-7dc9f8f7]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5);position:relative;color:var(--jy-color-text-1);padding-bottom:24px}.flowManage-Association-form .choice[data-v-7dc9f8f7],.flowManage-Association-form .exhibition[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .exhibition .info-box[data-v-7dc9f8f7]{padding:20px;height:calc(100% - 20px)}.flowManage-Association-form .exhibition .info-box[data-v-7dc9f8f7] .el-scrollbar__view{width:calc(100% - 10px)}.flowManage-Association-form .info-box[data-v-7dc9f8f7]{margin:auto;text-align:center}.flowManage-Association-form .info-box .info-title[data-v-7dc9f8f7]{padding-top:3rem;font-size:var(--jy-font-size-title-2);color:var(--jy-color-text-1)}.flowManage-Association-form .info-box .info-from[data-v-7dc9f8f7]{margin-top:1.5rem}.flowManage-Association-form .info-footer[data-v-7dc9f8f7]{width:100%;position:absolute;bottom:0%;height:4rem;display:flex;align-items:center;justify-content:center;border-top:1px solid var(--jy-color-border-2)}.flowManage-Association-form .info-remind[data-v-7dc9f8f7]{width:654px;margin:auto;background:var(--jy-warning-1);border:1px solid var(--jy-warning-3);border-radius:var(--jy-border-radius-2);padding:1rem;margin-top:1rem;text-align:left}.flowManage-Association-form .info-remind .info-remind-title[data-v-7dc9f8f7]{display:flex;align-items:center;font-size:var(--jy-font-size-title-1)}.flowManage-Association-form .info-remind .info-remind-title .info-remind-title-icon[data-v-7dc9f8f7]{margin-right:.5rem;width:1.3rem;height:1.3rem}.flowManage-Association-form .info-remind .info-remind-title .info-remind-title-icon .icon[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .info-remind .info-remind-p[data-v-7dc9f8f7]{padding:.2rem 1.8rem;box-sizing:border-box;color:var(--jy-color-text-3)}.flowManage-Association-form .info-form[data-v-7dc9f8f7]{margin-top:24px;box-sizing:border-box;display:flex;justify-content:center}.flowManage-Association-form .info-noContent[data-v-7dc9f8f7]{margin-top:1rem;display:flex;justify-content:center;flex-flow:wrap}.flowManage-Association-form .info-noContent-backcolor[data-v-7dc9f8f7]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:258px;height:110px;background:rgba(0,0,0,.02);border:1px solid rgba(0,0,0,.15);border-radius:4px;margin:15px 10px 0 0;cursor:pointer}.flowManage-Association-form .info-noContent-backcolor .text[data-v-7dc9f8f7]{margin-top:20px;color:rgba(0,0,0,.85);font-size:14px}.flowManage-Association-form .info-noContent-desc[data-v-7dc9f8f7]{width:100%;margin-top:16px}.flowManage-Association-form .info-noContent-desc img[data-v-7dc9f8f7]{width:16px}.flowManage-Association-form .info-list[data-v-7dc9f8f7]{margin-top:16px;height:calc(100vh - 600px);overflow:hidden}.flowManage-Association-form .info-list .container-list[data-v-7dc9f8f7]{display:flex;justify-content:space-between;flex-wrap:wrap}.flowManage-Association-form .info-list .list[data-v-7dc9f8f7]{display:flex;flex-direction:column;width:258px;height:110px;margin:15px 10px 0 0;padding:12px 24px;border:1px solid var(--jy-color-border-1);border-radius:var(--jy-border-radius-4);background-color:var(--jy-color-fill--1)}.flowManage-Association-form .info-list .list-desc[data-v-7dc9f8f7]{flex:1;font-size:14px;text-align:center;color:rgba(0,0,0,.85);width:218px;word-break:break-all;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.flowManage-Association-form .info-list .container-list>i[data-v-7dc9f8f7]{width:258px;margin:15px 10px 0 0}.flowManage-Association-form .info-list .btn[data-v-7dc9f8f7]{width:60px;height:32px;font-size:14px;margin:auto}.flowManage-Association-form .icon[data-v-7dc9f8f7]{width:1rem;height:1rem;display:flex;justify-content:center;align-items:center}.flowManage-Association-form .icon .iconpark-icon[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .Have-been-enabled[data-v-7dc9f8f7]{background:var(--jy-success-1);border:1px solid var(--jy-success-6);border-radius:var(--jy-border-radius-2);font-size:var(--jy-font-size-caption);color:var(--jy-success-6);padding:.1rem .2rem;box-sizing:border-box}.flowManage-Association-form .disabled[data-v-7dc9f8f7]{background:var(--jy-color-fill--2);border:1px solid var(--jy-color-border-1);border-radius:var(--jy-border-radius-2);font-size:var(--jy-font-size-caption);color:var(--jy-color-text-2);padding:.1rem .2rem;box-sizing:border-box}.flowManage-Association-form[data-v-7dc9f8f7] .el-form .el-form-item__label{margin-bottom:0%}.flowManage-Association-form[data-v-7dc9f8f7] .el-form .el-select{width:100%}.el-form-item[data-v-7dc9f8f7]{margin-bottom:24px!important}.flowManage-advanced-setup[data-v-4d3f2f55]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5);display:flex;justify-content:center;color:var(--jy-color-text-1)}.flowManage-advanced-setup .info-box[data-v-4d3f2f55]{width:auto;margin:0% auto;text-align:left;padding-top:3rem}.flowManage-advanced-setup .time[data-v-4d3f2f55]{display:flex;align-items:center}.flowManage-advanced-setup .time .time-eminder[data-v-4d3f2f55]{display:flex;align-items:center;margin-right:1rem}.flowManage-advanced-setup .time .time-eminder .time-eminder-label[data-v-4d3f2f55]{display:flex;align-items:center;margin-right:.5rem}.flowManage-advanced-setup .time .time-eminder .time-eminder-label .time-eminder-label-text[data-v-4d3f2f55]{margin-right:.2rem}.flowManage-advanced-setup .time .time-Number[data-v-4d3f2f55]{display:flex;align-items:center}.flowManage-advanced-setup .time .time-Number .time-Number-text[data-v-4d3f2f55],.flowManage-advanced-setup .time .time-Number .time-Number-input[data-v-4d3f2f55]{margin-right:.5rem}.flowManage-advanced-setup .deWeight[data-v-4d3f2f55]{margin-top:1rem;display:flex;align-items:center}.flowManage-advanced-setup .deWeight .deWeight-text[data-v-4d3f2f55]{margin-right:.5rem}.flowManage-advanced-setup .icon[data-v-4d3f2f55]{width:1rem;height:1rem;display:flex;justify-content:center;align-items:center}.flowManage-advanced-setup .icon .iconpark-icon[data-v-4d3f2f55]{width:100%;height:100%}.components-ElMessageBox .dialog[data-v-a7c7c40d]{display:flex;flex-direction:column}.components-ElMessageBox .dialog .dialog-header[data-v-a7c7c40d]{display:flex;position:relative;padding:1rem 2.5rem;box-sizing:border-box;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-icon[data-v-a7c7c40d]{position:absolute;left:1rem;height:1.5rem;display:flex;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-icon .iconpark-icon[data-v-a7c7c40d]{width:1.2rem;height:1.2rem}.components-ElMessageBox .dialog .dialog-header .dialog-header-cont[data-v-a7c7c40d]{color:var(--jy-color-text-1);font-size:var(--jy-font-size-title-1)}.components-ElMessageBox .dialog .dialog-header .dialog-header-remove[data-v-a7c7c40d]{position:absolute;right:1rem;cursor:pointer;height:1.5rem;display:flex;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-remove .iconpark-icon[data-v-a7c7c40d]{width:1rem;height:1rem}.components-ElMessageBox .dialog .dialog-content[data-v-a7c7c40d]{padding:0rem 2.5rem;box-sizing:border-box;flex-grow:1;color:var(--jy-color-text-2)}.components-ElMessageBox .dialog .dialog-footer[data-v-a7c7c40d]{padding:1rem 2rem;box-sizing:border-box;display:flex;justify-content:flex-end}.components-ElMessageBox .dialog .cut-off-rule[data-v-a7c7c40d]{width:100%;border-bottom:1px solid var(--jy-color-border-2)}.components-ElMessageBox .dialog .center-content[data-v-a7c7c40d]{text-align:center}.components-ElMessageBox .dialog .center-footer[data-v-a7c7c40d]{justify-content:center}.components-ElMessageBox[data-v-a7c7c40d] .el-dialog .el-dialog__header{display:none}.components-ElMessageBox[data-v-a7c7c40d] .el-dialog .el-dialog__body{padding:0%;height:100%}.flowManage-layout[data-v-385067d7]{margin:0%;width:100%;height:100%}.flowManage-layout .process[data-v-385067d7]{width:100%;height:100%}.flowManage-layout .process .header[data-v-385067d7]{position:relative;z-index:1;display:flex;height:4rem;align-items:center;padding:0% 1rem;box-sizing:border-box;box-shadow:0 3px 6px -4px rgba(0,0,0,.12),0 6px 16px rgba(0,0,0,.08),0 9px 28px 8px rgba(0,0,0,.05);background-color:#fff;justify-content:space-between}.flowManage-layout .process .header .process-back[data-v-385067d7]{color:rgba(0,0,0,.85);display:flex;align-items:center;min-width:110px;font-size:22px}.flowManage-layout .process .header .process-back .iconpark[data-v-385067d7]{width:1.5rem;height:1.5rem;display:flex;align-items:center;margin-right:.5rem;cursor:pointer}.flowManage-layout .process .header .process-back .iconpark .iconpark-icon[data-v-385067d7]{width:1.2rem;height:1.2rem}.flowManage-layout .process .header .process-back .process-back-text[data-v-385067d7]{font-size:22px}.flowManage-layout .process .header .process-tabs[data-v-385067d7]{display:flex;height:100%;min-width:600px;flex:1;justify-content:center}.flowManage-layout .process .header .process-tabs .tabs[data-v-385067d7]{display:flex;align-items:center;color:rgba(0,0,0,.45);margin:0% 4%;box-sizing:border-box;height:100%;cursor:pointer;border-bottom:2px solid rgba(0,0,0,0)}.flowManage-layout .process .header .process-tabs .tabs .tabs-icon[data-v-385067d7]{width:1.2rem;height:1.2rem;border-radius:50%;border:1px solid rgba(0,0,0,.15);display:flex;align-items:center;justify-content:center;margin-right:.5rem}.flowManage-layout .process .header .process-tabs .tabs .tabs-text[data-v-385067d7]{font-size:16px}.flowManage-layout .process .header .process-tabs .checked-tabs[data-v-385067d7]{border-bottom:2px solid var(--jy-primary-6)}.flowManage-layout .process .header .process-tabs .checked-tabs .tabs-icon[data-v-385067d7]{background-color:var(--jy-primary-6);border:1px solid var(--jy-primary-6);color:#fff}.flowManage-layout .process .header .process-tabs .checked-tabs .tabs-text[data-v-385067d7]{color:var(--jy-primary-6)}.flowManage-layout .process .header .process-save[data-v-385067d7]{min-width:200px;display:flex;justify-content:flex-end;align-items:center}.flowManage-layout .process .header .process-save .process-save-down[data-v-385067d7]{margin-right:.5rem}.flowManage-layout .process .header .process-save .process-save-down .process-save-down-text[data-v-385067d7]{color:var(--jy-danger-6);cursor:pointer}.flowManage-layout .process .content[data-v-385067d7]{width:100%;height:calc(100vh - 56px);background-color:#f2f2f2;display:flex;align-items:flex-start;justify-content:center;position:relative;z-index:100}.popover-cont[data-v-385067d7]{padding:.5rem;color:var(--jy-color-text-1)}.popover-cont .popover-cont-title[data-v-385067d7]{font-size:var(--jy-font-size-title-1)}.popover-cont .popover-cont-subTitle[data-v-385067d7]{color:var(--jy-color-text-3);margin-top:.8rem}.popover-cont .popover-cont-list[data-v-385067d7]{margin-top:.2rem}.popover-cont .popover-cont-list .popover-cont-list-li[data-v-385067d7]{display:flex;align-items:center;background:rgba(0,0,0,.04);justify-content:space-between;padding:.8rem 1rem;margin:0rem 0rem .5rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-name[data-v-385067d7]{width:4rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-desc[data-v-385067d7]{color:var(--jy-color-text-3);width:calc(100% - 7rem);padding:0% .5rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-but[data-v-385067d7]{color:var(--jy-info-6);width:3rem;cursor:pointer}.flowManage-index .title[data-v-38977b56]{display:flex;align-items:center;justify-content:space-between}.flowManage-index .title .title-more[data-v-38977b56],.flowManage-index .title .title-more .title-more-add[data-v-38977b56],.flowManage-index .title .title-more .title-more-down[data-v-38977b56]{height:100%;display:flex;align-items:center}\n',document.head.appendChild(Z),{setters:[e=>{l=e.c},e=>{o=e.g,t=e.i,d=e.H,s=e.a8,i=e.Q,n=e._},e=>{r=e.aA,c=e.ay,p=e.be,u=e.k,f=e.aF,m=e.as,g=e.o,y=e.p,v=e.x,h=e.bj,b=e.a$,w=e.F,x=e.aD,I=e.m,M=e.n,T=e.w,k=e.aw,j=e.at,D=e.bl,A=e.bb,V=e.aT,_=e.v,B=e.ag,S=e.al,C=e.ae,U=e.aE,N=e.ac,z=e.aa,E=e.z,L=e.aG,F=e.a4},e=>{O=e._},e=>{q=e.K},e=>{R=e.u,J=e.a},e=>{P=e.default},e=>{$=e.default},e=>{H=e.default},e=>{W=e.M},e=>{Y=e.ab},e=>{K=e.E},e=>{G=e.a},e=>{Q=e.J},e=>{X=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const Z=e=>(k("data-v-b5f496d1"),e=e(),j(),e),ee={class:"flowManage-basics-info"},ae={class:"info-box"},le=Z((()=>y("div",{class:"info-title"}," 请填写如下基础信息 ",-1))),oe={class:"info-from"},te=T(" 物理用印 "),de=T(" 电子签章 "),se={class:"contbox"},ie=Z((()=>y("div",{class:"box-icon"},[y("img",{class:"box-icon-img",src:O,alt:""})],-1))),ne={class:"contbox"},re=Z((()=>y("div",{class:"box-icon"},[y("img",{class:"box-icon-img",src:O,alt:""})],-1))),ce=T(" 变更会清空已设计的流程，请问确定要继续吗？ "),pe=o({props:{businessList:{type:Array,default:()=>[]},modelValue:{type:String,default:""},sealId:{type:String,default:""},sealApplyInitId:{type:String,default:""},openType:{type:String,default:"add"},editBasicsForm:{type:Object,default:()=>({flowName:"",applyTypeId:"",sealUseTypeId:"1",fileTypeIds:[],fileTypeScope:[],showDataScope:[],dataScope:[],readme:""})},modelLinkId:{type:Object,deftault:()=>({})}},emits:"update:modelValue",setup(e,{expose:a,emit:l}){const o=e,i=R(),n=r(!1),T=r(!1),k=r([]),j=r(["user","organ"]),D=r("user"),A=r([]),V=r([]),_=r(null),B=r(!1),S=c({flowName:"",applyTypeId:"",sealUseTypeId:"1",fileTypeIds:[],fileTypeScope:[],showDataScope:[],dataScope:[],readme:""}),C=c({flowName:[{required:!0,message:"请填写流程名称",trigger:"change"}],applyTypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],sealUseTypeId:[{required:!0,message:"请选择用印类型",trigger:"change"}],fileTypeIds:[{required:!0,message:"请选择文件类型",trigger:["change","blur"]}],showDataScope:[{required:!0,message:"请选择流程适用范围",trigger:["change","blur"]}]}),U=t("accountInfo")&&t("accountInfo").userInfo?t("accountInfo").userInfo.userId:"",N=r({userId:U});p((()=>o.editBasicsForm),(e=>{if(e&&e.flowName&&"edit"===o.openType){S.flowName=e.flowName,S.applyTypeId=e.applyTypeId,S.sealUseTypeId=e.sealUseTypeId,S.readme=e.readme;const a=JSON.parse(JSON.stringify(e.fileTypeScope)),l=JSON.parse(JSON.stringify(e.dataScope));J(l),Z(a),k.value=l,Q.value=a}}));const z=r(null),E=()=>{z.value.blur(),T.value=!0},L=r(null),F=()=>{L.value.blur(),n.value=!0};S.sealUseTypeId=u({get:()=>o.sealId,set(e){l("update:sealId",e)}});const O=e=>{k.value=e,J(e)},J=e=>{const a=[];e&&e.length>0?(S.dataScope=[],V.value=e,e.forEach((e=>{a.push(e.id),S.dataScope.push({scopeId:e.id,scopeName:e.name,includeChild:e.includeChild,scopeType:"user"===e.type?1:2})})),S.showDataScope=a):(S.showDataScope=[],S.dataScope=[])},P=u({get:()=>o.modelLinkId,set(e){l("update:modelLinkId",e)}}),$=r("apply"),H=r(null),W=()=>{P.value.modelId&&(H.value.blur(),B.value=!0,$.value="apply")},Y=()=>{B.value=!1,"apply"===$.value?H.value.toggleMenu():S.sealUseTypeId="1"===S.sealUseTypeId?"2":"1",i.setModelId("",""),P.value={modleId:"",definitionId:""}},K=()=>{B.value=!1,"apply"===$.value&&H.value.blur()},G=e=>{P.value.modelId&&(S.sealUseTypeId=e,B.value=!0,$.value="sealType")};p((()=>S.applyTypeId),(e=>{l("update:modelValue",e)})),p((()=>o.modelValue),(e=>{S.applyTypeId=e}),{deep:!0,immediate:!0});const Q=r([]),X=e=>{Q.value=e,Z(e)},Z=e=>{const a=[],l=[],o=[];e.forEach((e=>{a.push({fileTypeId:e.id,fileTypeName:e.name,includeChild:e.includeChild?"1":"0",type:"fileType"}),l.push({id:e.id,name:e.name}),o.push(e.id)})),A.value=l,S.fileTypeIds=o,S.fileTypeScope=a},pe=e=>{Q.value=fe(Q.value,e)},ue=e=>{k.value=fe(k.value,e)},fe=(e,a)=>Array.isArray(e)&&0!==e.length?e.filter((e=>e.id!==a)):e;return a({getBasicsFormValue:async()=>{const e=await _.value.validate().catch((e=>e));return"boolean"==typeof e&&e?S:[e]},form:S}),(e,a)=>{const l=f("el-input"),t=f("el-form-item"),i=f("el-option"),r=f("el-option-group"),c=f("el-select"),p=f("el-radio"),u=f("el-radio-group"),U=f("el-form"),R=s;return m(),g("div",ee,[y("div",ae,[le,y("div",oe,[v(U,{model:b(S),"label-width":"120px",rules:b(C),ref_key:"ruleFormRef",ref:_},{default:h((()=>[v(t,{label:"流程名称",prop:"flowName"},{default:h((()=>[v(l,{modelValue:b(S).flowName,"onUpdate:modelValue":a[0]||(a[0]=e=>b(S).flowName=e),placeholder:"请输入",clearable:"",maxlength:"45"},null,8,["modelValue"])])),_:1}),v(t,{label:"业务类型",prop:"applyTypeId"},{default:h((()=>[v(c,{modelValue:b(S).applyTypeId,"onUpdate:modelValue":a[1]||(a[1]=e=>b(S).applyTypeId=e),ref_key:"selectApplyRef",ref:H,onClick:W},{default:h((()=>[(m(!0),g(w,null,x(o.businessList,(e=>(m(),I(r,{key:e.applyTypeName,label:e.applyTypeName},{default:h((()=>[(m(!0),g(w,null,x(e.children,(e=>(m(),I(i,{key:e.applyTypeId,label:e.applyTypeName,value:e.applyTypeId},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(S).applyTypeId===o.sealApplyInitId?(m(),I(t,{key:0,label:"用印类型",prop:"sealUseTypeId"},{default:h((()=>[v(u,{modelValue:b(S).sealUseTypeId,"onUpdate:modelValue":a[4]||(a[4]=e=>b(S).sealUseTypeId=e)},{default:h((()=>[v(p,{label:"1",size:"large",onChange:a[2]||(a[2]=e=>G("2"))},{default:h((()=>[te])),_:1}),v(p,{label:"2",size:"large",onChange:a[3]||(a[3]=e=>G("1"))},{default:h((()=>[de])),_:1})])),_:1},8,["modelValue"])])),_:1})):M("",!0),b(S).applyTypeId===o.sealApplyInitId?(m(),I(t,{key:1,label:"文件类型",prop:"fileTypeIds"},{default:h((()=>[y("div",se,[v(c,{modelValue:b(S).fileTypeIds,"onUpdate:modelValue":a[5]||(a[5]=e=>b(S).fileTypeIds=e),ref_key:"selectRef",ref:z,placeholder:"请选择",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,onClick:E,onRemoveTag:pe},{default:h((()=>[(m(!0),g(w,null,x(A.value,(e=>(m(),I(i,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),ie])])),_:1})):M("",!0),v(t,{label:"流程适用范围",prop:"showDataScope"},{default:h((()=>[y("div",ne,[v(c,{modelValue:b(S).showDataScope,"onUpdate:modelValue":a[6]||(a[6]=e=>b(S).showDataScope=e),ref_key:"selectFileRef",ref:L,placeholder:"请选择",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,onClick:F,onRemoveTag:ue},{default:h((()=>[(m(!0),g(w,null,x(V.value,(e=>(m(),I(i,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),re])])),_:1}),v(t,{label:"流程说明"},{default:h((()=>[v(l,{modelValue:b(S).readme,"onUpdate:modelValue":a[7]||(a[7]=e=>b(S).readme=e),type:"textarea",maxlength:"100","show-word-limit":"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])]),n.value?(m(),I(b(d),{key:0,show:n.value,"onUpdate:show":a[8]||(a[8]=e=>n.value=e),searchSelected:k.value,"onUpdate:searchSelected":O,tabsShow:j.value,activeTab:D.value},null,8,["show","searchSelected","tabsShow","activeTab"])):M("",!0),T.value?(m(),I(b(q),{key:1,show:T.value,"onUpdate:show":a[9]||(a[9]=e=>T.value=e),searchSelected:Q.value,"onUpdate:searchSelected":X,queryParams:N.value},null,8,["show","searchSelected","queryParams"])):M("",!0),v(R,{modelValue:B.value,"onUpdate:modelValue":a[10]||(a[10]=e=>B.value=e),mode:1,onOnConfirm:Y,onOnCancel:K},{default:h((()=>[ce])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b5f496d1"]]),ue="/zgj-web-fenbao/assets/vector-0f9d5285.svg",fe=e=>(k("data-v-7dc9f8f7"),e=e(),j(),e),me={class:"flowManage-Association-form"},ge={class:"choice"},ye={class:"info-box"},ve=_('<div class="info-title" data-v-7dc9f8f7> 选择表单进行关联 </div><div class="info-remind" data-v-7dc9f8f7><div class="info-remind-title" data-v-7dc9f8f7><div class="info-remind-title-icon" data-v-7dc9f8f7><i class="icon" data-v-7dc9f8f7><svg class="iconpark-icon" data-v-7dc9f8f7><use href="#Check-Circle" data-v-7dc9f8f7></use></svg></i></div><div class="info-remind-title-text" data-v-7dc9f8f7> 提示 </div></div><div class="info-remind-p" data-v-7dc9f8f7> 1: 如果关联表单，则该流程仅用于当前表单； </div><div class="info-remind-p" data-v-7dc9f8f7> 2: 若当前业务类型/文件类型换绑新的表单，则新表单无法使用当前流程； </div><div class="info-remind-p" data-v-7dc9f8f7> 3: 如果不关联表单，无论当前业务类型/文件类型绑定的表单怎么变更，该流程都可使用。 </div></div>',2),he={class:"info-form"},be=T(" 物理用印 "),we=T(" 电子签章 "),xe={key:0,class:"info-noContent"},Ie=[fe((()=>y("img",{src:ue},null,-1))),fe((()=>y("div",{class:"text"},"去创建",-1)))],Me=fe((()=>y("div",{class:"info-noContent-desc"},[y("img",{src:"/zgj-web-fenbao/assets/info-6c401016.svg"}),T(" 暂无可关联的表单 ")],-1))),Te={key:1,class:"info-list"},ke={class:"container-list"},je={class:"list-desc"},De={style:{"margin-top":"4px"}},Ae=T(" 选择 "),Ve=[fe((()=>y("img",{src:ue},null,-1))),fe((()=>y("div",{class:"text"},"去创建",-1)))],_e=fe((()=>y("i",null,null,-1))),Be=fe((()=>y("i",null,null,-1))),Se=fe((()=>y("i",null,null,-1))),Ce=fe((()=>y("i",null,null,-1))),Ue=fe((()=>y("i",null,null,-1))),Ne=fe((()=>y("i",null,null,-1))),ze={key:0,class:"exhibition"},Ee={class:"info-footer"},Le=T("编辑"),Fe=T("重新选择"),Oe=T(" 变更会清空已设计的流程，请问确定要继续吗？ "),qe={props:{businessList:{type:Array,default:()=>[]},modelValue:{type:String,default:""},sealId:{type:String,default:"1"},sealApplyInitId:{type:String,default:""},openType:{type:String,default:"add"},formMessageId:{type:String,default:""},modelLinkId:{type:Object,deftault:()=>({})}},emits:"update:modelValue",setup(e,{expose:a,emit:l}){const o=e,t=R(),d=r(null),n=r(""),T=r(null),k=r(!0),j=r(!1),_=r(!1),B=c({currentState:"1",list:{radio:"",data:[]},JyElMessageBox:{show:!1,header:{data:""},content:{data:""}},SealformData:{},SealoptionData:{},showRelatedfFlow:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"}],butDatas:[{name:"知道了",type:"",clickName:function(){}}]}}),S=c({ProcessName:"",ProcessType:!1,sealUseTypeId:"1",applyTypeId:"",formMessageId:"",formDefinitionId:""}),C=u({get:()=>o.modelLinkId,set(e){l("update:modelLinkId",e)}}),U=r("apply"),N=r(null),z=()=>{C.value.modelId&&(N.value.blur(),_.value=!0,U.value="apply")},E=()=>{_.value=!1,"apply"===U.value?N.value.toggleMenu():S.sealUseTypeId="1"===S.sealUseTypeId?"2":"1",t.setModelId("",""),C.value={modleId:"",definitionId:""}},L=()=>{_.value=!1,"apply"===U.value&&N.value.blur()},F=e=>{C.value.modelId&&(S.sealUseTypeId=e,_.value=!0,U.value="sealType")},O=r(""),q=e=>{O.value=e.formMessageId,k.value=!1,J.getFormJsonById({formMessageId:e.formMessageId}).then((a=>{S.formMessageId=a.data.formMessageId,S.formDefinitionId=a.data.formDefinitionId,B.currentState="2",n.value=a.success&&JSON.parse(a.data.formInfo)||"",T.value=e,k.value=!0}))};p((()=>o.formMessageId),(e=>{e&&q({formMessageId:e})}));const Y=()=>{B.currentState="1"},K=()=>{!async function(e){if(!e)return T.value={formMessageId:null},void(B.JyElMessageBox.show=!0);const a=await i.flowList({formMessageId:e});a.data&&0!==a.data.length?(B.showRelatedfFlow.show=!0,G.value={header:"提示",content:"当前表单被已启用的以下流程所使用，仅当以下流程停用才允许编辑",selectionData:a.data}):(T.value={formMessageId:null},B.JyElMessageBox.show=!0)}(O.value)},G=r(null),Q=async()=>{try{const e={applyTypeId:S.applyTypeId,sealUseTypeId:S.sealUseTypeId},a=await J.flowSettingForm(e);B.list.data=a.data||[],j.value=!0}catch(e){}};return p((()=>S.applyTypeId),(e=>{if(!e)return j.value=!1;B.list.data=[],Q(),l("update:modelValue",e)}),{deep:!0,immediate:!0}),p((()=>o.modelValue),(e=>{S.applyTypeId=e}),{deep:!0,immediate:!0}),S.sealUseTypeId=u({get:()=>o.sealId,set(e){l("update:sealId",e)}}),p((()=>S.sealUseTypeId),(e=>{e&&!C.value.modelId&&Q()}),{deep:!0,immediate:!0}),a({getAssociationValue:()=>S.formDefinitionId?S:[{formDefinitionId:[{message:"请选择关联表单",fieldValue:"",field:"formDefinitionId"}]}],saveAddModel:e=>new Promise(((a,l)=>{if(!S.formDefinitionId)return void l("请选择表单");const o=Math.random();W.add({modelKey:o,formIdList:[S.formDefinitionId],modelName:e}).then((()=>{W.getModelKey({modelKey:o}).then((e=>{a({modelId:e.modelId,definitionId:e.definitionId})}))}))}))}),(e,a)=>{const l=f("el-option"),t=f("el-option-group"),i=f("el-select"),r=f("el-form-item"),c=f("el-radio"),p=f("el-radio-group"),u=f("el-form"),C=f("el-button"),U=f("el-scrollbar"),O=$,R=f("JyElMessageBox"),J=P,W=s;return m(),g("div",me,[D(y("div",ge,[y("div",ye,[ve,y("div",he,[v(u,{model:b(S),"label-width":"80px","status-icon":"",style:{width:"500px"}},{default:h((()=>[v(r,{label:"业务类型",prop:"applyTypeId",required:""},{default:h((()=>[v(i,{modelValue:b(S).applyTypeId,"onUpdate:modelValue":a[0]||(a[0]=e=>b(S).applyTypeId=e),ref_key:"selectApplyRef",ref:N,onClick:z},{default:h((()=>[(m(!0),g(w,null,x(o.businessList,(e=>(m(),I(t,{key:e.applyTypeName,label:e.applyTypeName},{default:h((()=>[(m(!0),g(w,null,x(e.children,(e=>(m(),I(l,{key:e.applyTypeId,label:e.applyTypeName,value:e.applyTypeId},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(S).applyTypeId===o.sealApplyInitId?(m(),I(r,{key:0,label:"用印类型",prop:"sealUseTypeId"},{default:h((()=>[v(p,{modelValue:b(S).sealUseTypeId,"onUpdate:modelValue":a[3]||(a[3]=e=>b(S).sealUseTypeId=e)},{default:h((()=>[v(c,{label:"1",size:"large",onChange:a[1]||(a[1]=e=>F("2"))},{default:h((()=>[be])),_:1}),v(c,{label:"2",size:"large",onChange:a[2]||(a[2]=e=>F("1"))},{default:h((()=>[we])),_:1})])),_:1},8,["modelValue"])])),_:1})):M("",!0)])),_:1},8,["model"])]),0===b(B).list.data.length&&j.value?(m(),g("div",xe,[y("div",{class:"info-noContent-backcolor",onClick:K},Ie),Me])):M("",!0),b(S).applyTypeId&&0!==b(B).list.data.length?(m(),g("div",Te,[v(U,{style:{height:"100%"},"view-style":"padding: 0 54px"},{default:h((()=>[y("div",ke,[(m(!0),g(w,null,x(b(B).list.data,((e,a)=>(m(),g("div",{class:"list",key:a},[y("div",je,V(e.formName),1),y("div",De,[v(C,{type:"primary",class:"btn",onClick:a=>q(e)},{default:h((()=>[Ae])),_:2},1032,["onClick"])])])))),128)),y("div",{class:"info-noContent-backcolor",onClick:K},Ve),_e,Be,Se,Ce,Ue,Ne])])),_:1})])):M("",!0)])],512),[[A,"1"===b(B).currentState]]),"2"===b(B).currentState?(m(),g("div",ze,[v(U,{class:"info-box",always:""},{default:h((()=>[k.value?(m(),I(O,{key:0,mode:"render",formJson:n.value,formData:b(B).SealformData,optionData:b(B).SealoptionData,ref_key:"refFillFormInformation",ref:d,onOnLoaded:a[4]||(a[4]=e=>d.value.disableForm())},null,8,["formJson","formData","optionData"])):M("",!0)])),_:1}),y("div",Ee,[v(C,{type:"primary",onClick:K},{default:h((()=>[Le])),_:1}),v(C,{onClick:Y},{default:h((()=>[Fe])),_:1})])])):M("",!0),y("div",null,[v(R,{modelValue:b(B).JyElMessageBox.show,"onUpdate:modelValue":a[7]||(a[7]=e=>b(B).JyElMessageBox.show=e),"custom-content":!0,defaultAttribute:{fullscreen:!0,height:"100%"}},{default:h((()=>[b(B).JyElMessageBox.show?(m(),I(H,{key:0,modelValue:b(B).JyElMessageBox.show,"onUpdate:modelValue":a[5]||(a[5]=e=>b(B).JyElMessageBox.show=e),addTitle:"编辑",columnData:T.value,onClose:a[6]||(a[6]=e=>b(B).JyElMessageBox.show=!1),sealUseTypeId:b(S).sealUseTypeId,applyTypeId:b(S).applyTypeId,optionData:o.businessList,onReloadData:q},null,8,["modelValue","columnData","sealUseTypeId","applyTypeId","optionData"])):M("",!0)])),_:1},8,["modelValue"])]),v(J,{"onUpdate:modelValue":a[8]||(a[8]=e=>b(B).showRelatedfFlow.show=!1),show:b(B).showRelatedfFlow.show,selectionData:b(B).componentsBatch.selectionData,showToastDialogContent:G.value,label:"flowName"},null,8,["show","selectionData","showToastDialogContent"]),v(W,{modelValue:_.value,"onUpdate:modelValue":a[9]||(a[9]=e=>_.value=e),mode:1,onOnConfirm:E,onOnCancel:L},{default:h((()=>[Oe])),_:1},8,["modelValue"])])}}},Re=o(qe,[["__scopeId","data-v-7dc9f8f7"]]),Je=e=>(k("data-v-4d3f2f55"),e=e(),j(),e),Pe={class:"flowManage-advanced-setup"},$e={class:"info-box"},He={class:"time"},We={class:"time-eminder"},Ye=_('<div class="time-eminder-label" data-v-4d3f2f55><span class="time-eminder-label-text" data-v-4d3f2f55> 超时提醒 </span><i class="icon" data-v-4d3f2f55><svg class="iconpark-icon" data-v-4d3f2f55><use href="#Vector1" data-v-4d3f2f55></use></svg></i></div>',1),Ke={class:"time-eminder-switch"},Ge={class:"time-Number"},Qe=Je((()=>y("span",{class:"time-Number-text"},"超时",-1))),Xe={class:"time-Number-input"},Ze=Je((()=>y("span",{class:"time-Number-text"},"小时",-1))),ea={class:"deWeight"},aa=Je((()=>y("span",{class:"deWeight-text"},"审批人自动去重",-1))),la={class:"deWeight-radio"},oa=T("不去重"),ta=T("出现多次时，仅保留第一次"),da=T("在连续出现时，仅保留第一次"),sa=o({setup(e){const a=c({isTimeoutRemind:1,remindDuration:24,autoDistinct:0});return(e,l)=>{const o=f("el-switch"),t=f("el-input-number"),d=f("el-radio"),s=f("el-radio-group");return m(),g("div",Pe,[y("div",$e,[y("div",He,[y("div",We,[Ye,y("div",Ke,[v(o,{modelValue:b(a).isTimeoutRemind,"onUpdate:modelValue":l[0]||(l[0]=e=>b(a).isTimeoutRemind=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),y("div",Ge,[Qe,y("div",Xe,[v(t,{modelValue:b(a).remindDuration,"onUpdate:modelValue":l[1]||(l[1]=e=>b(a).remindDuration=e),min:0},null,8,["modelValue"])]),Ze])]),y("div",ea,[aa,y("div",la,[v(s,{modelValue:b(a).autoDistinct,"onUpdate:modelValue":l[2]||(l[2]=e=>b(a).autoDistinct=e)},{default:h((()=>[v(d,{label:0},{default:h((()=>[oa])),_:1}),v(d,{label:1},{default:h((()=>[ta])),_:1}),v(d,{label:2},{default:h((()=>[da])),_:1})])),_:1},8,["modelValue"])])])])])}}},[["__scopeId","data-v-4d3f2f55"]]),ia=e=>(k("data-v-a7c7c40d"),e=e(),j(),e),na={class:"components-ElMessageBox"},ra={key:0,class:"dialog-header"},ca={key:0,class:"dialog-header-icon"},pa=[ia((()=>y("svg",{class:"iconpark-icon"},[y("use",{href:"#icon4"})],-1)))],ua={key:1,class:"dialog-header-cont"},fa=[ia((()=>y("svg",{class:"iconpark-icon"},[y("use",{href:"#Vector"})],-1)))],ma={key:1,class:"cut-off-rule"},ga={key:2,class:"cut-off-rule"},ya=T("确定"),va=T("取消"),ha={props:{type:{type:String,default:"0"},modelValue:{type:Boolean,default:!0},"show-cut-off-rule":{type:Boolean,default:!1},"show-close":{type:Boolean,default:!0},"show-icon":{type:Boolean,default:!1},"show-title":{type:Boolean,default:!0},"show-footer":{type:Boolean,default:!0},"show-header":{type:Boolean,default:!0},"custom-content":{type:Boolean,default:!1},defaultAttribute:{type:Object,default:()=>({})}},emits:["close","update:modelValue"],setup(e,{emit:a}){const l=e,o=c({props:{defaultAttribute:{"align-center":!0,"show-close":!1,width:"500px",center:!1}}});function t(){const e=o.props;for(const a in l)Object.hasOwnProperty.call(e,a)?"defaultAttribute"!==a&&(e[a]=l[a]):e[a]=l[a];for(const a in l.defaultAttribute)Object.hasOwnProperty.call(l.defaultAttribute,a)&&(e.defaultAttribute[a]=l.defaultAttribute[a])}function d(){o.props.modelValue=!1}function s(){o.props.modelValue=!1,a("update:modelValue",o.props.modelValue)}return p(l,((e,a)=>{t()})),B((()=>{t()})),S((()=>{})),(e,a)=>{const l=f("el-button"),t=Y;return m(),g("div",na,[v(t,z({visible:b(o).props.modelValue,"onUpdate:visible":a[0]||(a[0]=e=>b(o).props.modelValue=e)},b(o).props.defaultAttribute,{footer:null,keyboard:!1,width:"100%","wrap-class-name":"full-modal",getContainer:!1,closable:!1,zIndex:1003,onOnCancel:s,onOnOk:s}),{default:h((()=>[b(o).props.customContent?(m(),g("div",{key:0,class:"dialog",style:C({height:b(o).props.defaultAttribute.height})},[U(e.$slots,"default",{},void 0,!0)],4)):(m(),g("div",{key:1,class:"dialog",style:C({height:b(o).props.defaultAttribute.height})},[b(o).props.showHeader&&(b(o).props.showIcon||b(o).props.showTitle||b(o).props.showCutOffRule)?(m(),g("div",ra,[b(o).props.showIcon?(m(),g("div",ca,pa)):M("",!0),b(o).props.showTitle?(m(),g("div",ua,[U(e.$slots,"header",{},void 0,!0)])):M("",!0),b(o).props.showClose?(m(),g("div",{key:2,class:"dialog-header-remove",onClick:d},fa)):M("",!0)])):M("",!0),b(o).props.showCutOffRule?(m(),g("div",ma)):M("",!0),y("div",{class:N(["dialog-content",{"center-content":!!b(o).props.defaultAttribute.center}])},[U(e.$slots,"content",{},void 0,!0)],2),b(o).props.showCutOffRule?(m(),g("div",ga)):M("",!0),b(o).props.showFooter?(m(),g("div",{key:3,class:N(["dialog-footer",{"center-footer":!!b(o).props.defaultAttribute.center}])},[U(e.$slots,"footer",{},(()=>[v(l,{type:"primary"},{default:h((()=>[ya])),_:1}),v(l,{onClick:d},{default:h((()=>[va])),_:1})]),!0)],2)):M("",!0)],4))])),_:3},16,["visible"])])}}},ba=o(ha,[["__scopeId","data-v-a7c7c40d"]]),wa=e=>(k("data-v-385067d7"),e=e(),j(),e),xa={class:"add-flow-modal"},Ia={class:"flowManage-layout"},Ma={class:"process"},Ta={class:"header"},ka={class:"process-back"},ja=[wa((()=>y("svg",{class:"iconpark-icon"},[y("use",{href:"#Vector8Stroke"})],-1)))],Da={class:"process-back-text"},Aa={class:"process-tabs"},Va=["onClick"],_a={class:"tabs-icon"},Ba={class:"tabs-text"},Sa={class:"process-save"},Ca={class:"process-save-down"},Ua={class:"process-save-down-text"},Na={class:"popover-cont"},za=wa((()=>y("div",{class:"popover-cont-title"}," 内容不完善，当前无法发布 ",-1))),Ea=wa((()=>y("div",{class:"popover-cont-subTitle"}," 以下内容不完善，请修改后发布 ",-1))),La={key:0,class:"popover-cont-list"},Fa={class:"popover-cont-list-li-name"},Oa={class:"popover-cont-list-li-desc"},qa=wa((()=>y("div",{class:"popover-cont-list-li-but"},"去修改 ",-1))),Ra={class:"content"},Ja=T(" 确定 "),Pa={props:{modelValue:{type:Boolean,default:!1},businessList:{type:Array,default:()=>[]},openType:{type:String,default:"add"},treeSelectedId:{type:String,default:""},sealApplyInitId:{type:String,default:""},editModleIds:{type:Object,default:()=>({definitionId:"",modelId:"",flowMessageId:""})}},emits:"update:modelValue",setup(e,{emit:l}){const o=e,t=R(),d=r("1"),s=E({loader:()=>n((()=>a.import("./index-legacy-e811e636.js")),void 0)}),k=c({checkedIndex:"1",tabsData:[{index:"1",label:"基础信息",checked:!0},{index:"2",label:"关联表单"},{index:"3",label:"流程设计"},{index:"4",label:"高级设置"}],jyBoxHeader:"",jyBoxCont:"",jyBoxShow:!1}),j=u({get:()=>o.modelValue,set(e){l("update:modelValue",e)}}),_=u({get:()=>o.treeSelectedId,set(e){l("update:treeSelectedId",e)}}),B=()=>{j.value=!1,l("reloadData")},S=r(null),C=r(null),U=r(null),z=r(null),O=r([]),q=r({modelId:"",definitionId:""}),P=r(!0),$=r(!1),H=r({applyTypeId:"",fileTypeScope:[],dataScope:[],flowName:"",readme:"",sealUseTypeId:""}),Y=r("");"edit"===o.openType&&(q.value.definitionId=o.editModleIds.definitionId,q.value.modelId=o.editModleIds.modelId,t.setModelId(q.value.modelId,q.value.definitionId),J.flowDetail({flowMessageId:o.editModleIds.flowMessageId}).then((e=>{const a=e.data.organScope?e.data.organScope:[],l=e.data.organUserScope?e.data.organUserScope:[];H.value={applyTypeId:e.data.applyTypeId,fileTypeScope:e.data.fileTypeScope,dataScope:a.concat(l),flowName:e.data.flowName,readme:e.data.readme,sealUseTypeId:e.data.sealUseTypeId},Y.value=e.data.formMessageId})));const G=e=>{k.tabsData.forEach((a=>{a.checked=!1,a.index===e.index&&(a.checked=!0,k.checkedIndex=a.index)}))},Q=async()=>{O.value=[];const e=await U.value.getBasicsFormValue();if(Array.isArray(e))for(const l in e[0])O.value.push({type:"基础信息",message:e[0][l][0].message});const a=C.value.getAssociationValue();if(Array.isArray(a))for(const l in a[0])O.value.push({type:"关联表单",message:a[0][l][0].message});let t=[];if(S.value){if(t=await S.value.designSave("add"===o.openType?"designModel":"updateModel"),Array.isArray(t))for(const l in t[0])O.value.push({type:"流程设计",message:t[0][l][0].message})}else O.value.push({type:"流程设计",message:"请设计流程"});if(O.value.length>0)return;const d={...e,...a,...t};"add"===o.openType?J.add(d).then((()=>{B(),l("reloadData")})):"edit"===o.openType&&W.detail({modelId:o.editModleIds.modelId}).then((e=>{J.flowEdit({...d,flowMessageId:o.editModleIds.flowMessageId,modelId:o.editModleIds.modelId,definitionId:e.definitionId}).then((()=>{B(),l("reloadData")}))}))};return p((()=>q.value),(e=>{if(e){if(!e||!e.modelId)return;t.setModelId(e.modelId,e.definitionId)}})),(a,l)=>{const t=f("el-popover"),n=f("el-button"),r=f("JyElMessageBox"),c=L("loading");return m(),g("div",xa,[v(ba,{modelValue:b(j),"onUpdate:modelValue":l[6]||(l[6]=e=>F(j)?j.value=e:null),"custom-content":!0,defaultAttribute:{fullscreen:!0,height:"100%"}},{default:h((()=>[y("div",Ia,[y("div",Ma,[y("div",Ta,[y("div",ka,[y("i",{class:"iconpark",onClick:B},ja),y("span",Da,[D(y("span",null,V(a.$t("t-zgj-sync.add")),513),[[A,"add"===o.openType]]),D(y("span",null,V(a.$t("t-editors")),513),[[A,"edit"===o.openType]])])]),y("div",Aa,[(m(!0),g(w,null,x(b(k).tabsData,((e,a)=>(m(),g("div",{class:N(["tabs",{"checked-tabs":!!e.checked}]),key:a,onClick:a=>(async e=>{if("3"===e.index){if("edit"===o.openType&&q.value.modelId)return $.value=!0,G(e),P.value?void i.flowDetail({...o.editModleIds,edit:!0}).then((e=>{$.value=!1,P.value=!1,S.value.handleSetData(e.data.data)})):void($.value=!1);O.value=[];const a=await U.value.getBasicsFormValue();if(Array.isArray(a)){for(const e in a[0])O.value.push({type:"基础信息",message:a[0][e][0].message});K.warning("请填写基础信息")}const l=C.value.getAssociationValue();if(Array.isArray(l)){for(const e in l[0])O.value.push({type:"关联表单",message:l[0][e][0].message});K.warning("请选择关联表单")}if(O.value.length>0)return;q.value=await C.value.saveAddModel(U.value.form.flowName).catch((e=>{k.jyBoxHeader="提示？",k.jyBoxCont=e,k.jyBoxShow=!0})),q.value||(k.jyBoxHeader="提示？",k.jyBoxCont="请填写完整信息",k.jyBoxShow=!0)}G(e)})(e)},[y("div",_a,V(e.index),1),y("div",Ba,V(e.label),1)],10,Va)))),128))]),y("div",Sa,[y("div",Ca,[v(t,{placement:"bottom",width:400,trigger:"click"},{reference:h((()=>[y("div",Ua,[D(y("span",null,V(O.value.length)+"项不完善 ",513),[[A,0!==O.value.length]])])])),default:h((()=>[y("div",Na,[za,Ea,O.value?(m(),g("div",La,[(m(!0),g(w,null,x(O.value,((e,a)=>(m(),g("div",{class:"popover-cont-list-li",key:a},[y("div",Fa,V(e.type),1),y("div",Oa,V(e.message),1),qa])))),128))])):M("",!0)])])),_:1})]),v(n,{class:"process-save-but",type:"primary",onClick:Q},{default:h((()=>[T(V(a.$t("t-zgj-Save")),1)])),_:1})])]),y("div",Ra,[D(v(pe,{ref_key:"refBasicsInfo",ref:U,modelValue:b(_),"onUpdate:modelValue":l[0]||(l[0]=e=>F(_)?_.value=e:null),sealId:d.value,"onUpdate:sealId":l[1]||(l[1]=e=>d.value=e),modelLinkId:q.value,"onUpdate:modelLinkId":l[2]||(l[2]=e=>q.value=e),businessList:o.businessList,sealApplyInitId:o.sealApplyInitId,openType:e.openType,editBasicsForm:H.value},null,8,["modelValue","sealId","modelLinkId","businessList","sealApplyInitId","openType","editBasicsForm"]),[[A,"1"==b(k).checkedIndex]]),D(v(Re,{ref_key:"refAssociationForm",ref:C,modelValue:b(_),"onUpdate:modelValue":l[3]||(l[3]=e=>F(_)?_.value=e:null),sealId:d.value,"onUpdate:sealId":l[4]||(l[4]=e=>d.value=e),modelLinkId:q.value,"onUpdate:modelLinkId":l[5]||(l[5]=e=>q.value=e),businessList:o.businessList,sealApplyInitId:o.sealApplyInitId,openType:e.openType,formMessageId:Y.value},null,8,["modelValue","sealId","modelLinkId","businessList","sealApplyInitId","openType","formMessageId"]),[[A,"2"==b(k).checkedIndex]]),q.value.modelId?D((m(),I(b(s),{key:0,ref_key:"refVFlowDesign",ref:S,initObj:q.value,openType:e.openType,style:{height:"calc(100vh - 100px)"}},null,8,["initObj","openType"])),[[A,"3"==b(k).checkedIndex],[c,$.value]]):M("",!0),D(v(sa,{ref_key:"refAdvancedSetup",ref:z},null,512),[[A,"4"==b(k).checkedIndex]])])])])])),_:1},8,["modelValue"]),v(r,{modelValue:b(k).jyBoxShow,"onUpdate:modelValue":l[8]||(l[8]=e=>b(k).jyBoxShow=e),show:b(k).jyBoxShow,defaultAttribute:{},onOnCancel:l[9]||(l[9]=e=>b(k).jyBoxShow=!1)},{header:h((()=>[T(V(b(k).jyBoxHeader),1)])),content:h((()=>[T(V(b(k).jyBoxCont),1)])),footer:h((()=>[v(n,{type:"primary",onClick:l[7]||(l[7]=e=>b(k).jyBoxShow=!1)},{default:h((()=>[Ja])),_:1})])),_:1},8,["modelValue","show"])])}}},$a=o(Pa,[["__scopeId","data-v-385067d7"]]),Ha=[{prop:"flowName",label:"流程名称",fixed:"left",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150,show:!0},{prop:"fileTypeName",label:"文件类型",sortable:!0,"min-width":150,show:!0},{prop:"flag",label:"状态",sortable:!0,"min-width":120,show:!0},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":120,show:!0},{prop:"modifyDatetime",label:"更新时间",sortable:!0,"min-width":180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":280,align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"status"},{name:"t-zgj-qyWechat.Copy"}]}],Wa=[{prop:"flowName",label:"流程名称",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150,show:!0},{prop:"flag",label:"状态",sortable:!0,"min-width":120,show:!0},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":120,show:!0},{prop:"modifyDatetime",label:"更新时间",sortable:!0,"min-width":180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":260,show:!0,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"status"},{name:"t-zgj-qyWechat.Copy"}]}],Ya={class:"flowManage-index"},Ka={class:"title"},Ga={class:"title-more"},Qa={class:"title-more-add"},Xa=(e=>(k("data-v-38977b56"),e=e(),j(),e))((()=>y("div",{class:"title-more-down"},null,-1))),Za={class:"header-div"},el=["src"],al={class:"content-div"},ll=T(" 确认 "),ol=T("取消"),tl={class:"header-div"},dl=["src"],sl={class:"content-div"},il={setup(e){const a=r(!1),o=r([]),t=r({modelId:"",definitionId:""}),d=r(!1),s=r(null),i=r(null),n=r({flowMessageId:"",modelId:"",definitionId:""}),p=()=>{d.value=!0,s.value="add"},u=r(null),k=r({}),j=r(""),D=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"}},{id:"status",label:"状态",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"启用"},{value:"0",label:"停用"}]},{id:"updateTime",label:"更新时间",type:"picker",requestType:"array",startRequest:"updateStartTime",endRequest:"updateEndTime",inCommonUse:!1,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!1,joinStr:","},options:[]},{id:"sealUseTypeId",label:"用印类型",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"物理用印"},{value:"2",label:"电子签章"}]},{id:"formMessageId",label:"关联表单",type:"select",optionLabel:"formName",optionValue:"formMessageId",filterable:!0,inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},requestObj:{method:"GET",url:"/form/list",type:"flow"}}],A=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"}},{id:"status",label:"状态",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"启用"},{value:"0",label:"停用"}]},{id:"updateTime",label:"更新时间",type:"picker",requestType:"array",startRequest:"updateStartTime",endRequest:"updateEndTime",inCommonUse:!1,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"formMessageId",label:"关联表单",type:"select",optionLabel:"formName",optionValue:"formMessageId",filterable:!0,inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},requestObj:{method:"GET",url:"/form/list",type:"flow"}}],_=c({flowMessageId:"",columnData:{},batchColumnData:[],MessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},componentsSearchForm:{style:{lineStyle:{width:"30%"},labelStyle:{width:"100px"}},data:D,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:Ha,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:l,columnIndex:o})=>{if("flowName"===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,100,200,300,400],background:!0}},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!0,"show-checkbox":!1,"default-expand-all":!0,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"applyTypeId","current-node-key":"2"},defaultProps:{label:"applyTypeName",children:"children"},value:""},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"},{name:"批量启用"},{name:"批量停用"}],butDatas:[{name:"知道了",type:"",clickName:U}]}}),S=(e,l,d,s)=>{"flowName"===l.property&&(a.value=!0,t.value={modelId:e.modelId,definitionId:e.definitionId},o.value=[{value:"detail",params:{flowMessageId:e.flowMessageId}},{value:"record",params:{operationId:e.flowMessageId}},{value:"version",params:{flowMessageId:e.flowMessageId}}])},C=(e,a,l,o)=>{_.columnData=a,_.flowMessageId=a.flowMessageId,_.title=l.name,"t-zgj-qyWechat.Copy"===l.name&&K.warning("功能暂未实现，敬请期待"),"t-zgj-Edit"===l.name&&("1"===a.flag?K.warning("请将流程停用后再进行修改"):(d.value=!0,s.value="edit",n.value.flowMessageId=a.flowMessageId,n.value.definitionId=a.definitionId,n.value.modelId=a.modelId)),"t-zgj-Delete"===l.name&&(_.MessageBox.header.data="提示",_.MessageBox.content.data="确认要删除流程吗？",_.MessageBox.show=!0,_.MessageBox.type="删除"),"status"===l.name&&"1"===a.flag&&(_.MessageBox.header.data="停用",_.MessageBox.content.data="请问确定停用该流程吗？",_.MessageBox.show=!0,_.MessageBox.type="停用"),"status"===l.name&&"0"===a.flag&&(_.MessageBox.header.data="启用",_.MessageBox.content.data="请问确定启用该流程吗？",_.MessageBox.show=!0,_.MessageBox.type="启用")};function U(){_.showToastDialog.show=!1}const N=(e,a)=>{a.then((a=>{200===a.code?K.success(`${e}成功！`):K.success(`${e}失败，请重试`),_.MessageBox.show=!1,O()}))};function z(e,a){_.batchColumnData=[],a.forEach((e=>{_.batchColumnData.push(e.flowName)})),_.showToastDialog.header.data=e.name,_.showToastDialog.content.data=`已选中以下流程，请问确定要${e.name}吗？`,_.showToastDialog.show=!0,_.showToastDialog.type=e.name,_.componentsBatch.butDatas=[{name:"确定",type:"primary",clickName:()=>E(a)},{name:"取消",type:"",clickName:U}]}const E=e=>{const a=e,l=[];switch(_.showToastDialog.type){case"批量删除":_.batchColumnData=[],a.forEach((e=>{"1"===e.flag&&_.batchColumnData.push(e.flowName),l.push(e.flowMessageId)})),_.batchColumnData.length>0?(_.showToastDialog.header.data=_.showToastDialog.type,_.showToastDialog.content.data="请将以下流程停用后再进行删除",_.componentsBatch.butDatas=[{name:"知道了",type:"primary",clickName:U}]):L("批量删除",J.batchDelete({flowMessageIds:l}));break;case"批量停用":a.forEach((e=>{l.push(e.flowMessageId)})),L("批量停用",J.batachEnable({flowMessageIds:l,flag:"0"}));break;case"批量启用":a.forEach((e=>{l.push(e.flowMessageId)})),L("批量启用",J.batachEnable({flowMessageIds:l,flag:"1"}))}},L=(e,a)=>{a.then((a=>{200===a.code?K.success(`${e}成功！`):K.error(`${e}失败，请重试！`),_.showToastDialog.show=!1,O()}))},F=(e,a)=>{1!==a.level&&(k.value.applyTypeId=e.applyTypeId?e.applyTypeId:null,_.componentsTree.value=e.applyTypeId,q(e.applyTypeId))},O=()=>{q(_.componentsTree.value),u.value.reloadData()},q=e=>{e===j.value?(_.componentsSearchForm.data=D,_.componentsTable.header=Ha,u.value.reloadSearchForm(D,{applyTypeId:e}),u.value.setTableHeader(Ha)):(_.componentsSearchForm.data=A,_.componentsTable.header=Wa,u.value.setTableHeader(Wa),u.value.reloadSearchForm(A,{applyTypeId:e})),u.value.reloadData()};return B((()=>{G.listApplyTypeTree({}).then((e=>{const a=[];e.data.forEach((e=>{if(e.applyTypePid){"用印申请"===e.applyTypeName&&(j.value=e.applyTypeId);const l=a.findIndex((a=>a.applyTypeId===e.applyTypePid));l>-1&&a[l].children.push(e)}else e.children=[],a.push(e)})),_.componentsTree.data=a,_.componentsTree.value=a[0].children[0].applyTypeId,k.value.applyTypeId=j.value,O()}))})),(e,r)=>{const c=f("el-button"),D=f("JyElMessageBox"),A=f("el-scrollbar");return m(),g("div",Ya,[v(Q,{url:"/flow/page",ref_key:"table",ref:u,hasTree:!0,needAutoRequest:!1,componentsSearchForm:b(_).componentsSearchForm,componentsTableHeader:b(_).componentsTable.header,componentsBatch:b(_).componentsBatch,queryParams:k.value,statusColoum:"flag",tableClick:"flowName",openValue:"1",isNo:!1,onCellClick:S,onCustomClick:C,onClickBatchButton:z},{title:h((()=>[y("div",Ka,[y("div",null,V(e.$t("t-zgj-cg-menu-liucheng-guanli")),1),y("div",Ga,[y("div",Qa,[v(c,{type:"primary",onClick:p},{default:h((()=>[T(" + "+V(e.$t("t-zgj-sync.add")),1)])),_:1})]),Xa])])])),tree:h((()=>[y("div",null,[b(_).componentsTree.value?(m(),I(b(l),{key:0,ref_key:"tree",ref:i,modelValue:b(_).componentsTree.value,"onUpdate:modelValue":r[0]||(r[0]=e=>b(_).componentsTree.value=e),data:b(_).componentsTree.data,defaultAttribute:b(_).componentsTree.defaultAttribute,defaultProps:b(_).componentsTree.defaultProps,onCurrentChange:F},null,8,["modelValue","data","defaultAttribute","defaultProps"])):M("",!0)])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),v(X,{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=e=>a.value=e),modulesName:"system_flow_management",detailParams:o.value,importParams:t.value},null,8,["modelValue","detailParams","importParams"]),d.value?(m(),I($a,{key:0,modelValue:d.value,"onUpdate:modelValue":r[2]||(r[2]=e=>d.value=e),openType:s.value,sealApplyInitId:j.value,editModleIds:n.value,treeSelectedId:b(_).componentsTree.value,"onUpdate:treeSelectedId":r[3]||(r[3]=e=>b(_).componentsTree.value=e),businessList:b(_).componentsTree.data,onReloadData:O},null,8,["modelValue","openType","sealApplyInitId","editModleIds","treeSelectedId","businessList"])):M("",!0),v(D,{modelValue:b(_).MessageBox.show,"onUpdate:modelValue":r[6]||(r[6]=e=>b(_).MessageBox.show=e),show:b(_).MessageBox.show,defaultAttribute:{}},{header:h((()=>[y("div",Za,[y("img",{src:b(_).MessageBox.header.icon,alt:""},null,8,el),y("span",null,V(b(_).MessageBox.header.data),1)])])),content:h((()=>[y("div",al,V(b(_).MessageBox.content.data),1)])),footer:h((()=>[v(c,{type:"primary",onClick:r[4]||(r[4]=e=>(e=>{if("取消"===e&&(_.MessageBox.show=!1),"删除"===e){if("1"===_.columnData.flag)return _.MessageBox.show=!1,void K.warning("请将流程停用后再进行删除");N(e,J.flowDelete({flowMessageId:_.flowMessageId}))}"停用"===e&&N(e,J.flowEnable({flowMessageId:_.flowMessageId,flag:"0"})),"启用"===e&&N(e,J.flowEnable({flowMessageId:_.flowMessageId,flag:"1"})),"编辑"===e&&(_.MessageBox.show=!0)})(b(_).MessageBox.type))},{default:h((()=>[ll])),_:1}),v(c,{onClick:r[5]||(r[5]=e=>b(_).MessageBox.show=!1)},{default:h((()=>[ol])),_:1})])),_:1},8,["modelValue","show"]),v(D,{modelValue:b(_).showToastDialog.show,"onUpdate:modelValue":r[7]||(r[7]=e=>b(_).showToastDialog.show=e),show:b(_).showToastDialog.show,defaultAttribute:{}},{header:h((()=>[y("div",tl,[y("img",{src:b(_).showToastDialog.header.icon,alt:""},null,8,dl),y("span",null,V(b(_).showToastDialog.header.data),1)])])),content:h((()=>[y("div",sl,V(b(_).showToastDialog.content.data),1),v(A,{class:"scrollbar","max-height":"200px"},{default:h((()=>[(m(!0),g(w,null,x(b(_).batchColumnData,(e=>(m(),g("div",{key:e,class:"scrollbar-demo-item"},V(e),1)))),128))])),_:1})])),footer:h((()=>[(m(!0),g(w,null,x(b(_).componentsBatch.butDatas,(e=>(m(),I(c,{key:e.name,type:e.type,onClick:e.clickName},{default:h((()=>[T(V(e.name),1)])),_:2},1032,["type","onClick"])))),128))])),_:1},8,["modelValue","show"])])}}};e("default",o(il,[["__scopeId","data-v-38977b56"]]))}}}));
